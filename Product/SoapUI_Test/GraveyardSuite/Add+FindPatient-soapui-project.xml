<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="Add+FindPatient" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterMpiPortTypeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adaptermpi}AdapterMpiPortTypeBinding" soapVersion="1_1" anonymous="optional" definition="http://192.168.25.157:9080/NhinConnect/AdapterMpiService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://ATHC-GFAS:9080/NhinConnect/AdapterMpiService</con:endpoint><con:endpoint>http://172.16.50.54:9080/NhinConnect/AdapterMpiService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="FindCandidates" name="FindCandidates" bindingOperationName="FindCandidates" type="Request-Response" outputName="FindCandidatesResponse" inputName="FindCandidatesRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterMpiManagerPortTypeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adaptermpimanager}AdapterMpiManagerPortTypeBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/AdapterMpiManager.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:9080/AdapterMpiManagerService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:AddPatient" name="AddPatient" bindingOperationName="AddPatient" type="Request-Response" outputName="AddPatientResponse" inputName="AddPatientRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:RemovePatient" name="RemovePatient" bindingOperationName="RemovePatient" type="Request-Response" outputName="RemovePatientResponse" inputName="RemovePatientRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:testSuite name="Add+Find TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Add &amp; Find" searchProperties="true" id="a4d71265-5b73-456c-981a-90eb21e15f08"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FindCandidates</con:name><con:sourceType>SUT.AdapterMpiEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>FindCandidates</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}
</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>SimpleTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="500000000" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Younger</urn:family>
                              <urn:given partType="GIV">Gallow</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="M"/>
                           <urn:birthTime value="19990627"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="123456789" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Smith</urn:family>
                                    <urn:given partType="GIV">Mary</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Find Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>FindLocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LastName</con:name><con:sourceType>FindLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FindFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SenderHCID</con:name><con:sourceType>FindRemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:sender[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:receiver[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="FindCandidates"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiPortTypeBinding</con:interface><con:operation>FindCandidates</con:operation><con:request name="FindCandidates"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://172.16.50.54:9080/NhinConnect/AdapterMpiService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:urn1="urn:hl7-org:v3" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn1:PIXConsumer_PRPA_IN201305UVRequest>
         <urn1:PRPA_IN201305UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn1:id root="1.1" extension="-705c0da3:11e3fe4d86b:-7bbb"/>
            <urn1:creationTime value="20090127043800"/>
            <urn1:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV"/>
            <urn1:processingCode code="P"/>
            <urn1:processingModeCode code="R"/>
            <urn1:acceptAckCode code="AL"/>
            <urn1:receiver typeCode="RCV">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="1.1"/>
               </urn1:device>
               <urn1:telecom value="http://localhost:9080/NhinConnect/AdapterMpiService"/>
            </urn1:receiver>
            <urn1:sender typeCode="SND">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="2.2"/>
               </urn1:device>
            </urn1:sender>
            <urn1:controlActProcess classCode="CACT" moodCode="EVN">
               <urn1:code code="PRPA_TE201305UV" codeSystem="2.16.840.1.113883.1.6"/>
               <urn1:queryByParameter>
                  <urn1:queryId root="1.1" extension="500000000"/>
                  <urn1:statusCode code="new"/>
                  <urn1:parameterList>
                     <urn1:livingSubjectName>
                        <urn1:value>
                           <urn1:family partType="FAM">Younger</urn1:family>
                           <urn1:given partType="GIV">Gallow</urn1:given>
                        </urn1:value>
                        <urn1:semanticsText>LivingSubject.name</urn1:semanticsText>
                     </urn1:livingSubjectName>
                  </urn1:parameterList>
               </urn1:queryByParameter>
            </urn1:controlActProcess>
         </urn1:PRPA_IN201305UV>
         <urn1:assertion>
            <urn2:address>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>BUFFALO</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>12345 EAST COAST WAY</urn2:streetAddress>
               <urn2:zipCode>01010</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth>19800516</urn2:dateOfBirth>
            <urn2:dateOfSignature>20080520</urn2:dateOfSignature>
            <urn2:expirationDate>20090520</urn2:expirationDate>
            <urn2:explanationNonClaimantSignature>NEEDED</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature>true</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature>true</urn2:haveSignature>
            <urn2:haveWitnessSignature>true</urn2:haveWitnessSignature>
            <urn2:homeCommunity>
               <urn2:description>Federal - SSA</urn2:description>
               <urn2:homeCommunityId>2.16.840.1.113883.3.184</urn2:homeCommunityId>
               <urn2:name>Federal - SSA</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>FRED</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>ANDREW</urn2:secondNameOrInitials>
            </urn2:personName>
            <urn2:phoneNumber>
               <urn2:areaCode>703</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>1212</urn2:extension>
               <urn2:localNumber>555</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:purposeOfDisclosure>NEEDED FOR SSA</urn2:purposeOfDisclosure>
            <urn2:secondWitnessAddress>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>ALBANY</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>4 TROY STREET</urn2:streetAddress>
               <urn2:zipCode>01033</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>JAMES</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>KENNETH</urn2:secondNameOrInitials>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone>
               <urn2:areaCode>301</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>0001</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN>000000008</urn2:SSN>
            <urn2:uniquePatientId>1000000008</urn2:uniquePatientId>
            <urn2:witnessAddress>
               <urn2:addressType>
                  <urn2:code>H</urn2:code>
               </urn2:addressType>
               <urn2:city>HARTFORD</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>CT</urn2:state>
               <urn2:streetAddress>10410 MAIN ST.</urn2:streetAddress>
               <urn2:zipCode>05032</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName>
               <urn2:familyName>COREY</urn2:familyName>
               <urn2:givenName>AMANDA</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>H</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>EVE</urn2:secondNameOrInitials>
            </urn2:witnessName>
            <urn2:witnessPhone>
               <urn2:areaCode>202</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>1010</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>H</urn2:code>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo>
               <urn2:personName>
                  <urn2:familyName>FRANKLIN</urn2:familyName>
                  <urn2:givenName>MARK</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>P</urn2:code>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>ALAN</urn2:secondNameOrInitials>
               </urn2:personName>
               <urn2:userName>mfranklin</urn2:userName>
               <urn2:role>Administrator</urn2:role>
               <urn2:org>
                  <urn2:description>Federal - DoD</urn2:description>
                  <urn2:homeCommunityId>2.16.840.1.113883.3.198</urn2:homeCommunityId>
                  <urn2:name>Federal - DoD</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>80584001</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Psychiatrist</urn2:displayName>
                  <urn2:originalText>Psychiatrist</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized>true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded>
               <urn2:code>PSYCHOTHERAPY</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:claimFormRef>Ref-Clm-123</urn2:claimFormRef>
            <urn2:claimFormRaw>YWVvbGlhbQ==</urn2:claimFormRaw>
         </urn1:assertion>
      </urn1:PIXConsumer_PRPA_IN201305UVRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="Patient ID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@extension</path><content>${Add &amp; Find Spreadsheet#LocalID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LastName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path><content>${Add &amp; Find Spreadsheet#FindLastName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="FirstName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path><content>${Add &amp; Find Spreadsheet#FindFirstName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LocalHCID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@root</path><content>${Add &amp; Find Spreadsheet#LocalHCID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Gender Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:administrativeGenderCode[1]/@code</path><content>${Add &amp; Find Spreadsheet#Gender}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="DoB Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:birthTime[1]/@value</path><content>${Add &amp; Find Spreadsheet#DoB}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Different Patient ID" searchProperties="true" id="ad4b154a-8b05-4701-b947-882742213966"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FindCandidates</con:name><con:sourceType>SUT.AdapterMpiEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>FindCandidates</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}
</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>DiffPatId</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnson</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Find Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>FindLocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LastName</con:name><con:sourceType>FindLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FindFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SenderHCID</con:name><con:sourceType>FindRemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:sender[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:receiver[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="FindCandidates"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiPortTypeBinding</con:interface><con:operation>FindCandidates</con:operation><con:request name="FindCandidates"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:urn1="urn:hl7-org:v3" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn1:PIXConsumer_PRPA_IN201305UVRequest>
         <urn1:PRPA_IN201305UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn1:id root="1.1" extension="-705c0da3:11e3fe4d86b:-7bbb"/>
            <urn1:creationTime value="20090127043800"/>
            <urn1:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV"/>
            <urn1:processingCode code="P"/>
            <urn1:processingModeCode code="R"/>
            <urn1:acceptAckCode code="AL"/>
            <urn1:receiver typeCode="RCV">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="1.1"/>
               </urn1:device>
               <urn1:telecom value="http://localhost:9080/NhinConnect/AdapterMpiService"/>
            </urn1:receiver>
            <urn1:sender typeCode="SND">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="2.2"/>
               </urn1:device>
            </urn1:sender>
            <urn1:controlActProcess classCode="CACT" moodCode="EVN">
               <urn1:code code="PRPA_TE201305UV" codeSystem="2.16.840.1.113883.1.6"/>
               <urn1:queryByParameter>
                  <urn1:queryId root="1.1" extension="55555"/>
                  <urn1:statusCode code="new"/>
                  <urn1:parameterList>
                     <urn1:livingSubjectName>
                        <urn1:value>
                           <urn1:family partType="FAM">Johnson</urn1:family>
                           <urn1:given partType="GIV">Josephine</urn1:given>
                        </urn1:value>
                        <urn1:semanticsText>LivingSubject.name</urn1:semanticsText>
                     </urn1:livingSubjectName>
                  </urn1:parameterList>
               </urn1:queryByParameter>
            </urn1:controlActProcess>
         </urn1:PRPA_IN201305UV>
         <urn1:assertion>
            <urn2:address>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>BUFFALO</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>12345 EAST COAST WAY</urn2:streetAddress>
               <urn2:zipCode>01010</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth>19800516</urn2:dateOfBirth>
            <urn2:dateOfSignature>20080520</urn2:dateOfSignature>
            <urn2:expirationDate>20090520</urn2:expirationDate>
            <urn2:explanationNonClaimantSignature>NEEDED</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature>true</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature>true</urn2:haveSignature>
            <urn2:haveWitnessSignature>true</urn2:haveWitnessSignature>
            <urn2:homeCommunity>
               <urn2:description>Federal - SSA</urn2:description>
               <urn2:homeCommunityId>2.16.840.1.113883.3.184</urn2:homeCommunityId>
               <urn2:name>Federal - SSA</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>FRED</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>ANDREW</urn2:secondNameOrInitials>
            </urn2:personName>
            <urn2:phoneNumber>
               <urn2:areaCode>703</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>1212</urn2:extension>
               <urn2:localNumber>555</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:purposeOfDisclosure>NEEDED FOR SSA</urn2:purposeOfDisclosure>
            <urn2:secondWitnessAddress>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>ALBANY</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>4 TROY STREET</urn2:streetAddress>
               <urn2:zipCode>01033</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>JAMES</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>KENNETH</urn2:secondNameOrInitials>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone>
               <urn2:areaCode>301</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>0001</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN>000000008</urn2:SSN>
            <urn2:uniquePatientId>1000000008</urn2:uniquePatientId>
            <urn2:witnessAddress>
               <urn2:addressType>
                  <urn2:code>H</urn2:code>
               </urn2:addressType>
               <urn2:city>HARTFORD</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>CT</urn2:state>
               <urn2:streetAddress>10410 MAIN ST.</urn2:streetAddress>
               <urn2:zipCode>05032</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName>
               <urn2:familyName>COREY</urn2:familyName>
               <urn2:givenName>AMANDA</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>H</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>EVE</urn2:secondNameOrInitials>
            </urn2:witnessName>
            <urn2:witnessPhone>
               <urn2:areaCode>202</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>1010</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>H</urn2:code>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo>
               <urn2:personName>
                  <urn2:familyName>FRANKLIN</urn2:familyName>
                  <urn2:givenName>MARK</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>P</urn2:code>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>ALAN</urn2:secondNameOrInitials>
               </urn2:personName>
               <urn2:userName>mfranklin</urn2:userName>
               <urn2:role>Administrator</urn2:role>
               <urn2:org>
                  <urn2:description>Federal - DoD</urn2:description>
                  <urn2:homeCommunityId>2.16.840.1.113883.3.198</urn2:homeCommunityId>
                  <urn2:name>Federal - DoD</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>80584001</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Psychiatrist</urn2:displayName>
                  <urn2:originalText>Psychiatrist</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized>true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded>
               <urn2:code>PSYCHOTHERAPY</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:claimFormRef>Ref-Clm-123</urn2:claimFormRef>
            <urn2:claimFormRaw>YWVvbGlhbQ==</urn2:claimFormRaw>
         </urn1:assertion>
      </urn1:PIXConsumer_PRPA_IN201305UVRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="Patient ID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@extension</path><content>${Add &amp; Find Spreadsheet#LocalID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LastName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path><content>${Add &amp; Find Spreadsheet#FindLastName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="FirstName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path><content>${Add &amp; Find Spreadsheet#FindFirstName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LocalHCID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@root</path><content>${Add &amp; Find Spreadsheet#LocalHCID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Gender Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:administrativeGenderCode[1]/@code</path><content>${Add &amp; Find Spreadsheet#Gender}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="DoB Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:birthTime[1]/@value</path><content>${Add &amp; Find Spreadsheet#DoB}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Case-Sensitivity Test" searchProperties="true" id="f9bf9873-de78-43bd-8d77-785506991eb2"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FindCandidates</con:name><con:sourceType>SUT.AdapterMpiEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>FindCandidates</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"
log.info localMPI
log.info localMPIbak

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}

mpiFile.delete();</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>CaseTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnson</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Find Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>FindLocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LastName</con:name><con:sourceType>FindLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FindFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SenderHCID</con:name><con:sourceType>FindRemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:sender[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:receiver[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="FindCandidates"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiPortTypeBinding</con:interface><con:operation>FindCandidates</con:operation><con:request name="FindCandidates"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:urn1="urn:hl7-org:v3" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn1:PIXConsumer_PRPA_IN201305UVRequest>
         <urn1:PRPA_IN201305UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn1:id root="1.1" extension="-705c0da3:11e3fe4d86b:-7bbb"/>
            <urn1:creationTime value="20090127043800"/>
            <urn1:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV"/>
            <urn1:processingCode code="P"/>
            <urn1:processingModeCode code="R"/>
            <urn1:acceptAckCode code="AL"/>
            <urn1:receiver typeCode="RCV">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="1.1"/>
               </urn1:device>
               <urn1:telecom value="http://localhost:9080/NhinConnect/AdapterMpiService"/>
            </urn1:receiver>
            <urn1:sender typeCode="SND">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="2.2"/>
               </urn1:device>
            </urn1:sender>
            <urn1:controlActProcess classCode="CACT" moodCode="EVN">
               <urn1:code code="PRPA_TE201305UV" codeSystem="2.16.840.1.113883.1.6"/>
               <urn1:queryByParameter>
                  <urn1:queryId root="1.1" extension="77777"/>
                  <urn1:statusCode code="new"/>
                  <urn1:parameterList>
                     <urn1:livingSubjectName>
                        <urn1:value>
                           <urn1:family partType="FAM">JOHNSON</urn1:family>
                           <urn1:given partType="GIV">JOSEPHINE</urn1:given>
                        </urn1:value>
                        <urn1:semanticsText>LivingSubject.name</urn1:semanticsText>
                     </urn1:livingSubjectName>
                  </urn1:parameterList>
               </urn1:queryByParameter>
            </urn1:controlActProcess>
         </urn1:PRPA_IN201305UV>
         <urn1:assertion>
            <urn2:address>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>BUFFALO</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>12345 EAST COAST WAY</urn2:streetAddress>
               <urn2:zipCode>01010</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth>19800516</urn2:dateOfBirth>
            <urn2:dateOfSignature>20080520</urn2:dateOfSignature>
            <urn2:expirationDate>20090520</urn2:expirationDate>
            <urn2:explanationNonClaimantSignature>NEEDED</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature>true</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature>true</urn2:haveSignature>
            <urn2:haveWitnessSignature>true</urn2:haveWitnessSignature>
            <urn2:homeCommunity>
               <urn2:description>Federal - SSA</urn2:description>
               <urn2:homeCommunityId>2.16.840.1.113883.3.184</urn2:homeCommunityId>
               <urn2:name>Federal - SSA</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>FRED</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>ANDREW</urn2:secondNameOrInitials>
            </urn2:personName>
            <urn2:phoneNumber>
               <urn2:areaCode>703</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>1212</urn2:extension>
               <urn2:localNumber>555</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:purposeOfDisclosure>NEEDED FOR SSA</urn2:purposeOfDisclosure>
            <urn2:secondWitnessAddress>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>ALBANY</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>4 TROY STREET</urn2:streetAddress>
               <urn2:zipCode>01033</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>JAMES</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>KENNETH</urn2:secondNameOrInitials>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone>
               <urn2:areaCode>301</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>0001</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN>000000008</urn2:SSN>
            <urn2:uniquePatientId>1000000008</urn2:uniquePatientId>
            <urn2:witnessAddress>
               <urn2:addressType>
                  <urn2:code>H</urn2:code>
               </urn2:addressType>
               <urn2:city>HARTFORD</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>CT</urn2:state>
               <urn2:streetAddress>10410 MAIN ST.</urn2:streetAddress>
               <urn2:zipCode>05032</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName>
               <urn2:familyName>COREY</urn2:familyName>
               <urn2:givenName>AMANDA</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>H</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>EVE</urn2:secondNameOrInitials>
            </urn2:witnessName>
            <urn2:witnessPhone>
               <urn2:areaCode>202</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>1010</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>H</urn2:code>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo>
               <urn2:personName>
                  <urn2:familyName>FRANKLIN</urn2:familyName>
                  <urn2:givenName>MARK</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>P</urn2:code>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>ALAN</urn2:secondNameOrInitials>
               </urn2:personName>
               <urn2:userName>mfranklin</urn2:userName>
               <urn2:role>Administrator</urn2:role>
               <urn2:org>
                  <urn2:description>Federal - DoD</urn2:description>
                  <urn2:homeCommunityId>2.16.840.1.113883.3.198</urn2:homeCommunityId>
                  <urn2:name>Federal - DoD</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>80584001</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Psychiatrist</urn2:displayName>
                  <urn2:originalText>Psychiatrist</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized>true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded>
               <urn2:code>PSYCHOTHERAPY</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:claimFormRef>Ref-Clm-123</urn2:claimFormRef>
            <urn2:claimFormRaw>YWVvbGlhbQ==</urn2:claimFormRaw>
         </urn1:assertion>
      </urn1:PIXConsumer_PRPA_IN201305UVRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="Patient ID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@extension</path><content>${Add &amp; Find Spreadsheet#LocalID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LastName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path><content>${Add &amp; Find Spreadsheet#LastName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="FirstName Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path><content>${Add &amp; Find Spreadsheet#FirstName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="LocalHCID Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:id[1]/@root</path><content>${Add &amp; Find Spreadsheet#LocalHCID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Gender Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:administrativeGenderCode[1]/@code</path><content>${Add &amp; Find Spreadsheet#Gender}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="DoB Match"><con:configuration><path>declare namespace ns2='urn:hl7-org:v3';
//ns2:PRPA_IN201306UV[1]/ns2:controlActProcess[1]/ns2:subject[1]/ns2:registrationEvent[1]/ns2:subject1[1]/ns2:patient[1]/ns2:patientPerson[1]/ns2:birthTime[1]/@value</path><content>${Add &amp; Find Spreadsheet#DoB}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Not Found" searchProperties="true" id="61e92197-f3fe-473f-9544-34dd70692c34"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FindCandidates</con:name><con:sourceType>SUT.AdapterMpiEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>FindCandidates</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}
</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>NotFound</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnson</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Find Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>FindLocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:queryId[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LastName</con:name><con:sourceType>FindLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FindFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:controlActProcess[1]/urn1:queryByParameter[1]/urn1:parameterList[1]/urn1:livingSubjectName[1]/urn1:value[1]/urn1:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SenderHCID</con:name><con:sourceType>FindRemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:sender[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>FindLocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>FindCandidates</con:targetStep><con:targetPath>declare namespace urn1='urn:hl7-org:v3';
//urn1:PIXConsumer_PRPA_IN201305UVRequest[1]/urn1:PRPA_IN201305UV[1]/urn1:receiver[1]/urn1:device[1]/urn1:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="FindCandidates"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiPortTypeBinding</con:interface><con:operation>FindCandidates</con:operation><con:request name="FindCandidates"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:urn1="urn:hl7-org:v3" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn1:PIXConsumer_PRPA_IN201305UVRequest>
         <urn1:PRPA_IN201305UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn1:id root="1.1" extension="-705c0da3:11e3fe4d86b:-7bbb"/>
            <urn1:creationTime value="20090127043800"/>
            <urn1:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV"/>
            <urn1:processingCode code="P"/>
            <urn1:processingModeCode code="R"/>
            <urn1:acceptAckCode code="AL"/>
            <urn1:receiver typeCode="RCV">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="1.1"/>
               </urn1:device>
               <urn1:telecom value="http://localhost:9080/NhinConnect/AdapterMpiService"/>
            </urn1:receiver>
            <urn1:sender typeCode="SND">
               <urn1:device determinerCode="INSTANCE">
                  <urn1:id root="2.2"/>
               </urn1:device>
            </urn1:sender>
            <urn1:controlActProcess classCode="CACT" moodCode="EVN">
               <urn1:code code="PRPA_TE201305UV" codeSystem="2.16.840.1.113883.1.6"/>
               <urn1:queryByParameter>
                  <urn1:queryId root="1.1" extension="77777"/>
                  <urn1:statusCode code="new"/>
                  <urn1:parameterList>
                     <urn1:livingSubjectName>
                        <urn1:value>
                           <urn1:family partType="FAM">Johnson</urn1:family>
                           <urn1:given partType="GIV">Josephin</urn1:given>
                        </urn1:value>
                        <urn1:semanticsText>LivingSubject.name</urn1:semanticsText>
                     </urn1:livingSubjectName>
                  </urn1:parameterList>
               </urn1:queryByParameter>
            </urn1:controlActProcess>
         </urn1:PRPA_IN201305UV>
         <urn1:assertion>
            <urn2:address>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>BUFFALO</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>12345 EAST COAST WAY</urn2:streetAddress>
               <urn2:zipCode>01010</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth>19800516</urn2:dateOfBirth>
            <urn2:dateOfSignature>20080520</urn2:dateOfSignature>
            <urn2:expirationDate>20090520</urn2:expirationDate>
            <urn2:explanationNonClaimantSignature>NEEDED</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature>true</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature>true</urn2:haveSignature>
            <urn2:haveWitnessSignature>true</urn2:haveWitnessSignature>
            <urn2:homeCommunity>
               <urn2:description>Federal - SSA</urn2:description>
               <urn2:homeCommunityId>2.16.840.1.113883.3.184</urn2:homeCommunityId>
               <urn2:name>Federal - SSA</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>FRED</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>ANDREW</urn2:secondNameOrInitials>
            </urn2:personName>
            <urn2:phoneNumber>
               <urn2:areaCode>703</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>1212</urn2:extension>
               <urn2:localNumber>555</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:purposeOfDisclosure>NEEDED FOR SSA</urn2:purposeOfDisclosure>
            <urn2:secondWitnessAddress>
               <urn2:addressType>
                  <urn2:code>W</urn2:code>
               </urn2:addressType>
               <urn2:city>ALBANY</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>NY</urn2:state>
               <urn2:streetAddress>4 TROY STREET</urn2:streetAddress>
               <urn2:zipCode>01033</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName>
               <urn2:familyName>JONES</urn2:familyName>
               <urn2:givenName>JAMES</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>G</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>KENNETH</urn2:secondNameOrInitials>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone>
               <urn2:areaCode>301</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>0001</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>W</urn2:code>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN>000000008</urn2:SSN>
            <urn2:uniquePatientId>1000000008</urn2:uniquePatientId>
            <urn2:witnessAddress>
               <urn2:addressType>
                  <urn2:code>H</urn2:code>
               </urn2:addressType>
               <urn2:city>HARTFORD</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>CT</urn2:state>
               <urn2:streetAddress>10410 MAIN ST.</urn2:streetAddress>
               <urn2:zipCode>05032</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName>
               <urn2:familyName>COREY</urn2:familyName>
               <urn2:givenName>AMANDA</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>H</urn2:code>
               </urn2:nameType>
               <urn2:secondNameOrInitials>EVE</urn2:secondNameOrInitials>
            </urn2:witnessName>
            <urn2:witnessPhone>
               <urn2:areaCode>202</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>555</urn2:extension>
               <urn2:localNumber>1010</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>H</urn2:code>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo>
               <urn2:personName>
                  <urn2:familyName>FRANKLIN</urn2:familyName>
                  <urn2:givenName>MARK</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>P</urn2:code>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>ALAN</urn2:secondNameOrInitials>
               </urn2:personName>
               <urn2:userName>mfranklin</urn2:userName>
               <urn2:role>Administrator</urn2:role>
               <urn2:org>
                  <urn2:description>Federal - DoD</urn2:description>
                  <urn2:homeCommunityId>2.16.840.1.113883.3.198</urn2:homeCommunityId>
                  <urn2:name>Federal - DoD</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>80584001</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Psychiatrist</urn2:displayName>
                  <urn2:originalText>Psychiatrist</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized>true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded>
               <urn2:code>PSYCHOTHERAPY</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:claimFormRef>Ref-Clm-123</urn2:claimFormRef>
            <urn2:claimFormRaw>YWVvbGlhbQ==</urn2:claimFormRaw>
         </urn1:assertion>
      </urn1:PIXConsumer_PRPA_IN201305UVRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV[1]/@xsi:nil</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Duplicate Patient" searchProperties="true" id="1a9efc1d-d628-45bf-9ec5-840b947908a5"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient 2</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"
log.info localMPI
log.info localMPIbak

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}

mpiFile.delete();</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>CaseTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897655" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient Successfully added to the MPI</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer 2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777D" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654D" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient found in MPI. Currently IGNORE record</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Duplicate SSN" searchProperties="true"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient 2</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"
log.info localMPI
log.info localMPIbak

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}

mpiFile.delete();</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>CaseTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897655" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient Successfully added to the MPI</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Adjust Name / ID / SSN"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Add &amp; Find Spreadsheet" );
def lastName = dataSource.getPropertyValue( "LastName" );
def firstName = dataSource.getPropertyValue( "FirstName" );
def ssn = dataSource.getPropertyValue( "SSN" );
def localID = dataSource.getPropertyValue( "LocalID" );

lastName = lastName + "2"
localID = localID + "2"

groovyUtils.setPropertyValue( "Name / ID / SSN", "LastName", lastName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "FirstName", firstName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "SSN", ssn);
groovyUtils.setPropertyValue( "Name / ID / SSN", "LocalID", localID);
</script></con:config></con:testStep><con:testStep type="properties" name="Name / ID / SSN"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LastName</con:name><con:value>Johnson2</con:value></con:property><con:property><con:name>FirstName</con:name><con:value>Josephine</con:value></con:property><con:property><con:name>SSN</con:name><con:value>987897654</con:value></con:property><con:property><con:name>LocalID</con:name><con:value>777772</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer 2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777D" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654D" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient found in MPI. Currently IGNORE record</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Duplicate Name" searchProperties="true"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient 2</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"
log.info localMPI
log.info localMPIbak

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}

mpiFile.delete();</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>CaseTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897655" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient Successfully added to the MPI</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Adjust Name / ID / SSN"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Add &amp; Find Spreadsheet" );
def lastName = dataSource.getPropertyValue( "LastName" );
def firstName = dataSource.getPropertyValue( "FirstName" );
def ssn = dataSource.getPropertyValue( "SSN" );
def localID = dataSource.getPropertyValue( "LocalID" );

ssn = ssn + "2"
localID = localID + "2"

groovyUtils.setPropertyValue( "Name / ID / SSN", "LastName", lastName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "FirstName", firstName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "SSN", ssn);
groovyUtils.setPropertyValue( "Name / ID / SSN", "LocalID", localID);
</script></con:config></con:testStep><con:testStep type="properties" name="Name / ID / SSN"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LastName</con:name><con:value>Johnson</con:value></con:property><con:property><con:name>FirstName</con:name><con:value>Josephine</con:value></con:property><con:property><con:name>SSN</con:name><con:value>987897654</con:value></con:property><con:property><con:name>LocalID</con:name><con:value>77777</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer 2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer 2 1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777D" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654D" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient found in MPI. Currently IGNORE record</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Duplicate ID" searchProperties="true"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.MpiManagerEndpoint</con:name><con:value>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:value></con:property><con:property><con:name>SUT.AdapterMpiEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/AdapterMpiService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Get Endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AddPatient 2</con:name><con:sourceType>SUT.MpiManagerEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Backup_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"
log.info localMPI
log.info localMPIbak

File mpiFile = new File( localMPI );
if(mpiFile.exists())
{
    new File( localMPIbak ).withWriter 
    { 
        file -> new File( localMPI ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}

mpiFile.delete();</script></con:config></con:testStep><con:testStep type="datasource" name="Add &amp; Find Spreadsheet"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/MPIManagerTests.xls</file><worksheet>CaseTest</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>LocalID</con:property><con:property>LocalHCID</con:property><con:property>LocalName</con:property><con:property>RemoteID</con:property><con:property>RemoteHCID</con:property><con:property>RemoteName</con:property><con:property>LastName</con:property><con:property>FirstName</con:property><con:property>SSN</con:property><con:property>Gender</con:property><con:property>DoB</con:property><con:property>Address</con:property><con:property>City</con:property><con:property>State</con:property><con:property>Zip</con:property><con:property>Country</con:property><con:property>Race</con:property><con:property>Telecom</con:property><con:property>MMNLastName</con:property><con:property>MMNFirstName</con:property><con:property>FindLocalID</con:property><con:property>FindLocalHCID</con:property><con:property>FindRemoteHCID</con:property><con:property>FindLastName</con:property><con:property>FindFirstName</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897655" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient Successfully added to the MPI</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Adjust Name / ID / SSN"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Add &amp; Find Spreadsheet" );
def lastName = dataSource.getPropertyValue( "LastName" );
def firstName = dataSource.getPropertyValue( "FirstName" );
def ssn = dataSource.getPropertyValue( "SSN" );
def localID = dataSource.getPropertyValue( "LocalID" );

lastName = lastName + "2"
ssn = ssn + "2"

groovyUtils.setPropertyValue( "Name / ID / SSN", "LastName", lastName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "FirstName", firstName);
groovyUtils.setPropertyValue( "Name / ID / SSN", "SSN", ssn);
groovyUtils.setPropertyValue( "Name / ID / SSN", "LocalID", localID);
</script></con:config></con:testStep><con:testStep type="properties" name="Name / ID / SSN"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LastName</con:name><con:value>Johnson</con:value></con:property><con:property><con:name>FirstName</con:name><con:value>Josephine</con:value></con:property><con:property><con:name>SSN</con:name><con:value>987897654</con:value></con:property><con:property><con:name>LocalID</con:name><con:value>77777</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Add Transfer 2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalID</con:name><con:sourceType>LocalID</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LastName</con:name><con:sourceType>LastName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>FirstName</con:name><con:sourceType>FirstName</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>SSN</con:name><con:sourceType>SSN</con:sourceType><con:sourceStep>Name / ID / SSN</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:asOtherIDs[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Gender</con:name><con:sourceType>Gender</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:administrativeGenderCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>DoB</con:name><con:sourceType>DoB</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:birthTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Address</con:name><con:sourceType>Address</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:streetAddressLine[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>City</con:name><con:sourceType>City</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:city[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>State</con:name><con:sourceType>State</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:state[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Zip</con:name><con:sourceType>Zip</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:postalCode[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Country</con:name><con:sourceType>Country</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:addr[1]/urn:country[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Race</con:name><con:sourceType>Race</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:raceCode[1]/@code</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Telecom</con:name><con:sourceType>Telecom</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:telecom[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>MMNLastName</con:name><con:sourceType>MMNLastName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:family[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>MMNFirstName</con:name><con:sourceType>MMNFirstName</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:patientPerson[1]/urn:personalRelationship[1]/urn:relationshipHolder1[1]/urn:name[1]/urn:given[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SenderHCID</con:name><con:sourceType>RemoteHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>ReceiverHCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Add &amp; Find Spreadsheet</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>AddPatient 2</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="AddPatient 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterMpiManagerPortTypeBinding</con:interface><con:operation>AddPatient</con:operation><con:request name="AddPatient 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:8080/AdapterMpiManagerService/MpiManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:PRPA_IN201301UV ITSVersion="XML_1.0" xmlns="http://xml.netbeans.org/schema/phone" xmlns:msgns="http://j2ee.netbeans.org/wsdl/DataTransformation" xmlns:urn0="http://xml.netbeans.org/schema/homeCommunity" xmlns:urn1="http://xml.netbeans.org/schema/qualifiedSubjectId" xmlns:urn2="http://xml.netbeans.org/schema/subjectDiscoveryInfo" xmlns:urn3="http://xml.netbeans.org/schema/personName" xmlns:urn4="http://xml.netbeans.org/schema/address" xmlns:urn5="http://xml.netbeans.org/schema/documentInfo" xmlns:urn6="urn:ihe:iti:xds-b:2007" xmlns:urn7="http://xml.netbeans.org/schema/document" xmlns:urn8="http://xml.netbeans.org/schema/dataTransform" xmlns:urn9="urn:gov:hhs:fha:nhinc:xsd:documentregistryinfo" xmlns:ns2="http://xml.netbeans.org/schema/ce" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns7="http://xml.netbeans.org/schema/response" xmlns:ns9="http://xml.netbeans.org/schema/realDocumentEntry">
         <urn:id extension="-5a3e95b1:11d1fa33d45:-7f9b" root="1.1"/>
         <urn:creationTime value="20080627043800"/>
         <urn:interactionId extension="PRPA_IN201301UV" root="2.16.840.1.113883.1.6"/>
         <urn:processingCode code="T"/>
         <urn:processingModeCode code="T"/>
         <urn:acceptAckCode code="AL"/>
         <urn:receiver typeCode="RCV">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="1.1"/>
            </urn:device>
         </urn:receiver>
         <urn:sender typeCode="SND">
            <urn:device determinerCode="INSTANCE">
               <urn:id root="2.2"/>
            </urn:device>
         </urn:sender>
         <urn:controlActProcess moodCode="EVN">
            <urn:code code="PRPA_TE201301UV"/>
            <urn:informationRecipient typeCode="IRCP">
               <urn:assignedPerson>
                  <urn:representedOrganization>
                     <urn:id root="2.16.840.1.113883.3.200"/>
                     <urn:name>
                        <urn:delimiter>Federal - VA</urn:delimiter>
                     </urn:name>
                  </urn:representedOrganization>
               </urn:assignedPerson>
            </urn:informationRecipient>
            <urn:subject contextConductionInd="false" typeCode="SUBJ">
               <urn:registrationEvent classCode="REG" moodCode="EVN">
                  <urn:id nullFlavor="NA"/>
                  <urn:statusCode code="active"/>
                  <urn:subject1>
                     <urn:patient classCode="PAT">
                        <urn:id extension="77777D" root="1.1"/>
                        <urn:statusCode code="active"/>
                        <urn:patientPerson>
                           <urn:name use="L">
                              <urn:family partType="FAM">Johnsons</urn:family>
                              <urn:given partType="GIV">Josephine</urn:given>
                           </urn:name>
                           <urn:telecom use="H" value="321/13/7268546/7452"/>
                           <urn:administrativeGenderCode code="F"/>
                           <urn:birthTime value="20080311"/>
                           <urn:addr use="HME">
                              <urn:country>US</urn:country>
                              <urn:state>FL</urn:state>
                              <urn:city>Orlando</urn:city>
                              <urn:postalCode>98765</urn:postalCode>
                              <urn:streetAddressLine>123 Nixon Rd.</urn:streetAddressLine>
                           </urn:addr>
                           <urn:raceCode code="White"/>
                           <urn:asOtherIDs classCode="PAT">
                              <urn:id extension="987897654D" root="2.16.840.1.113883.4.1"/>
                              <urn:scopingOrganization>
                                 <urn:id root="2.16.840.1.113883.4.1"/>
                              </urn:scopingOrganization>
                           </urn:asOtherIDs>
                           <urn:personalRelationship classCode="PRS">
                              <urn:code code="MTH"/>
                              <urn:relationshipHolder1 determinerCode="INSTANCE">
                                 <urn:name use="L">
                                    <urn:family partType="FAM">Jones</urn:family>
                                    <urn:given partType="GIV">Lucy</urn:given>
                                 </urn:name>
                              </urn:relationshipHolder1>
                           </urn:personalRelationship>
                        </urn:patientPerson>
                        <urn:providerOrganization xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     </urn:patient>
                  </urn:subject1>
                  <urn:custodian xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               </urn:registrationEvent>
            </urn:subject>
         </urn:controlActProcess>
      </urn:PRPA_IN201301UV>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:hl7-org:v3';
//ns1:MCCI_IN000002UV01[1]/ns1:acknowledgement[1]/ns1:acknowledgementDetail[1]/ns1:code[1]/@code</path><content>Patient found in MPI. Currently IGNORE record</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpimanager/AdapterMpiManagerPortType/AddPatientRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Add &amp; Find Spreadsheet</dataSourceStep><targetStep>Add Transfer</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Restore_MPI"><con:settings/><con:config><script>import java.io.File;

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyStep = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def localMPI = propertyStep.getPropertyValue( "SUT.LocalMPI" );

localMPIbak = localMPI + ".bak"

File backupFile = new File( localMPIbak );
if(backupFile.exists())
{
    new File( localMPI ).withWriter 
    { 
        file -> new File( localMPIbak ).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }

    File copiedFile = new File( localMPI );
    if(copiedFile.exists())
    {
        backupFile.delete();
    }
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/><con:sensitiveInformation/></con:soapui-project>