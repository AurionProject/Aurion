<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="AdapterDocQuery-Test12310" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterDocQueryBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adapterdocquery}AdapterDocQueryBindingSoap11" soapVersion="1_1" anonymous="optional" definition="http://192.168.25.157:9080/NhinConnect/AdapterDocQuery?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/AdapterDocQuery</con:endpoint><con:endpoint>http://192.168.25.219:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:RespondingGateway_CrossGatewayQuery" name="RespondingGateway_CrossGatewayQuery" bindingOperationName="RespondingGateway_CrossGatewayQuery" type="Request-Response" outputName="RespondingGateway_CrossGatewayQueryResponse" inputName="RespondingGateway_CrossGatewayQueryRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:testSuite name="AdapterDocQuery TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.3.1.UT.2 - Find by PatientId (single doc)" searchProperties="true" id="ac8ad9e0-6590-45bd-aa08-e398a875bf21"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "SingleDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123402^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:03Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:03Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.3.2.UT.2 - Find by PatientId (multiple docs)" searchProperties="true" id="50aa1680-26c0-4581-94bd-2601bc42c123"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>RepositoryUniqueId</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocumentUniqueId</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MissingDocumentUniqueId</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T21:47:43Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T21:52:43Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "3"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.1.UT.1 - No matching classCode" searchProperties="true" id="02c078eb-e052-4fa9-9f14-a388162d86aa"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryClassCode">
                  <ns3:ValueList>
                     <ns3:Value>('blah')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:04Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:04Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.1.UT.2 - Matching classCode" searchProperties="true" id="b21ed53b-ef7e-427e-99e7-26a95d5f13c9"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryClassCode">
                  <ns3:ValueList>
                     <ns3:Value>('34133-9')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:04Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:04Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "3"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.2.UT.2 - No matching serviceStartTime" searchProperties="true" id="88d69fc1-508a-4e12-9e8d-25569645cab4"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>1900</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>1901</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:05Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:05Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.2.UT.2 - Matching serviceStartTime" searchProperties="true" id="c6c5519a-0295-4552-97d0-8ecaaba29284"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2000</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2005</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:05Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:05Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "2"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.2.UT.2 - Matching serviceStopTime" searchProperties="true" id="678ea014-3640-45d4-a3b5-07fb4b62738a"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2006</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2009</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:05Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:05Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "2"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.3.UT.2 - No matching creationTime between" searchProperties="true" id="08dc131e-bcda-49b1-9522-87cbdae022aa"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20060101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20061101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:05Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:05Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.3.UT.2 - creationTime between" searchProperties="true" id="6b363c1c-8f2d-48d3-a640-1789aa4669e2"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20070101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20071101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:06Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:06Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.3.UT.2 - creationTime left edge" searchProperties="true" id="11df17e0-6161-4575-becb-d7542f4ffa7f"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20080417</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20080517</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:06Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:06Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.3.UT.2 - creationTime right edge" searchProperties="true" id="e4af82cc-b6b7-44f7-8e97-6356554ce5de"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20050916</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20070518</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:06Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:06Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.4.UT.2 - classCode &amp; serviceStartTime" searchProperties="true" id="b1f4eabc-c117-4570-968a-cc4d5f8bfbf6"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2003</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2005</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryClassCode">
                  <ns3:ValueList>
                     <ns3:Value>('34133-9')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:07Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:07Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.4.UT.2 - classCode &amp; serviceStopTime" searchProperties="true" id="502a894e-14ce-4038-9bfd-22a72489dcc5"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2007</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2009</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryClassCode">
                  <ns3:ValueList>
                     <ns3:Value>('34133-9')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:07Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:07Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "2"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.5.UT.2 - creationTime &amp; serviceStartTime" searchProperties="true" id="4a444421-2a27-4a55-894c-e1234c9fdf3f"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2004</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStartTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2006</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20070101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20070907</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:07Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:07Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.5.UT.2 - creationTime &amp; serviceStopTime" searchProperties="true" id="81732b5f-4d6f-4500-9750-638fde282117"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>2005</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryServiceStopTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>2006</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20070101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20070907</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:08Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:08Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "1"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.6.UT.2 - creationTime &amp; classCode" searchProperties="true" id="0a6e5a95-c7e3-4ca1-85de-3565d7aaf4da"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeFrom">
                  <ns3:ValueList>
                     <ns3:Value>20080101</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryCreationTimeTo">
                  <ns3:ValueList>
                     <ns3:Value>20080907</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryClassCode">
                  <ns3:ValueList>
                     <ns3:Value>('34133-9')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:08Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:08Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "2"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.4.7.UT.2 - No Documents Available" searchProperties="true" id="4a6dff44-195a-46e1-a860-48f423613053"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "NoDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123403^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:08Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:08Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.5.1.UT.2 - Too Many Results" searchProperties="true" id="892bdbd8-89fe-409a-a927-8dbbaefe1cfa"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "TooManyResultsPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123405^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:09Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:09Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.5.2.UT.2 - No Patient Found" searchProperties="true" id="ddb2dcad-ab30-4561-8bf5-c76c5363ae2d"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "NonExistentPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D999999^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:09Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:09Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.5.4.UT.2 - Unknown Stored Query" searchProperties="true" id="5585d1b3-c925-44b1-a066-6cf17dd6fdec"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-xxxxxxxxxxxxxx">
               <ns3:Slot name="$XDSDocumentEntryPatientId">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:09Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:09Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.5.11.UT.2 - Missing Patient Id" searchProperties="true" id="a9637a88-1724-4168-b7d9-c53d2954bbcd"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/AdapterDocQuery-Test12310.properties</con:source><con:properties><con:property><con:name>DocQueryEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>DocRetrieveEndpoint</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>SingleDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>MultiDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalAA</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>LocalHCName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>FullPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>sigDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expireDate</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NoDocPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>NonExistentPatientID</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>TooManyResultsPatientID</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="get Dates"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
cal.add(Calendar.MINUTE, -5);
startDate = cal.getTime();
sigDateStr = sdf.format(startDate);

cal.setTime(nowDate);
cal.add(Calendar.DATE, 30);
expireDate = cal.getTime();
expireDateStr = sdf.format(expireDate);

groovyUtils.setPropertyValue( "Test Case Properties", "sigDate", sigDateStr);
groovyUtils.setPropertyValue( "Test Case Properties", "expireDate", expireDateStr);
</script></con:config></con:testStep><con:testStep type="groovy" name="Generate patient ID for Doc Query"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def LocalAA = propertyList.getPropertyValue( "LocalAA" );
def PatientID = propertyList.getPropertyValue( "MultiDocPatientID" );

fullPatientID = "'" + PatientID + "^^^&amp;" + LocalAA + "&amp;ISO'";
groovyUtils.setPropertyValue( "Test Case Properties", "FullPatientID", fullPatientID);
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpoint</con:name><con:sourceType>DocQueryEndpoint</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>HCID</con:name><con:sourceType>LocalHCID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/@home</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>HCName</con:name><con:sourceType>LocalHCName</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:userInfo[1]/ns7:org[1]/ns7:name[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>PatientID</con:name><con:sourceType>FullPatientID</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace query='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns1:RespondingGateway_CrossGatewayQueryRequest[1]/query:AdhocQueryRequest[1]/ns3:AdhocQuery[1]/ns3:Slot[1]/ns3:ValueList[1]/ns3:Value[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>signatureDate</con:name><con:sourceType>sigDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:dateOfSignature[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expirationDate</con:name><con:sourceType>expireDate</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Adapter_CrossGatewayQuery</con:targetStep><con:targetPath>declare namespace ns7='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns2:RespondingGateway_CrossGatewayQueryRequest[1]/ns1:assertion[1]/ns7:expirationDate[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Adapter_CrossGatewayQuery"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterDocQueryBindingSoap11</con:interface><con:operation>RespondingGateway_CrossGatewayQuery</con:operation><con:request name="Adapter_CrossGatewayQuery"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://dodadapter.fedsconnect.org:9080/NhinConnect/AdapterDocQuery</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RespondingGateway_CrossGatewayQueryRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:adapterdocquery" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <query:AdhocQueryRequest federated="false" maxResults="-1" startIndex="0" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
            <ns4:ResponseOption returnComposedObjects="false" returnType="RegistryObject"/>
            <ns3:AdhocQuery home="1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <ns3:Slot name="$XDSDocumentEntryStatus">
                  <ns3:ValueList>
                     <ns3:Value>'D123401^^^&amp;1.1&amp;ISO'</ns3:Value>
                  </ns3:ValueList>
               </ns3:Slot>
            </ns3:AdhocQuery>
         </query:AdhocQueryRequest>
         <ns1:assertion xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns10="http://docs.oasis-open.org/wsn/b-2" xmlns:ns11="http://nhinc.services.com/schema/auditmessage" xmlns:ns12="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch" xmlns:ns13="urn:ihe:iti:xds-b:2007" xmlns:ns14="http://docs.oasis-open.org/wsn/t-1" xmlns:ns2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns6="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns8="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns9="http://www.w3.org/2005/08/addressing" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch">
            <ns7:dateOfSignature>2009-05-19T20:14:09Z</ns7:dateOfSignature>
            <ns7:expirationDate>2009-06-18T20:19:09Z</ns7:expirationDate>
            <ns7:haveSecondWitnessSignature>false</ns7:haveSecondWitnessSignature>
            <ns7:haveSignature>false</ns7:haveSignature>
            <ns7:haveWitnessSignature>false</ns7:haveWitnessSignature>
            <ns7:userInfo>
               <ns7:personName>
                  <ns7:familyName>FRANKLIN</ns7:familyName>
                  <ns7:givenName>MARK</ns7:givenName>
                  <ns7:secondNameOrInitials>ALAN</ns7:secondNameOrInitials>
               </ns7:personName>
               <ns7:userName>mfranklin</ns7:userName>
               <ns7:org>
                  <ns7:name>InternalTest1</ns7:name>
               </ns7:org>
               <ns7:roleCoded>
                  <ns7:code>80584001</ns7:code>
                  <ns7:codeSystem>2.16.840.1.113883.6.96</ns7:codeSystem>
                  <ns7:codeSystemName>SNOMED_CT</ns7:codeSystemName>
                  <ns7:displayName>Psychiatrist</ns7:displayName>
               </ns7:roleCoded>
            </ns7:userInfo>
            <ns7:authorized>false</ns7:authorized>
            <ns7:purposeOfDisclosureCoded>
               <ns7:code>PSYCHOTHERAPY</ns7:code>
               <ns7:codeSystem>2.16.840.1.113883.3.18.7.1</ns7:codeSystem>
               <ns7:codeSystemName>nhin-purpose</ns7:codeSystemName>
               <ns7:displayName>Use or disclosure of Psychotherapy Notes</ns7:displayName>
            </ns7:purposeOfDisclosureCoded>
            <ns7:claimFormRef>Ref-Clm-123</ns7:claimFormRef>
            <ns7:claimFormRaw>YWVvbGlhbQ==</ns7:claimFormRaw>
         </ns1:assertion>
      </ns1:RespondingGateway_CrossGatewayQueryRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
def docCount = holder["count(//ns1:AdhocQueryResponse/ns4:RegistryObjectList/ns4:ExtrinsicObject)"]
assert docCount == "0"</scriptText></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>