<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="PatientCorrelationFacade" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="PatientCorrelationFacadeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade}PatientCorrelationFacadeBinding" soapVersion="1_1" anonymous="optional" definition="http://172.16.50.82:9080/PatientCorrelationFacadeService/PatientCorrelationFacadeService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/PatientCorrelationFacadeService</con:endpoint><con:endpoint>http://ATHC-GFAS:9080/PatientCorrelationFacadeService</con:endpoint><con:endpoint>http://172.16.50.82:9080/PatientCorrelationFacadeService</con:endpoint><con:endpoint>http://MHSNHIE3.fedsconnect.org:9080/PatientCorrelationFacadeService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="AddPatientCorrelation" name="AddPatientCorrelation" bindingOperationName="AddPatientCorrelation" type="Request-Response" outputName="AddPatientCorrelationResponse" inputName="AddPatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation isOneWay="false" action="RemovePatientCorrelation" name="RemovePatientCorrelation" bindingOperationName="RemovePatientCorrelation" type="Request-Response" outputName="RemovePatientCorrelationResponse" inputName="RemovePatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation isOneWay="false" action="RetrievePatientCorrelations" name="RetrievePatientCorrelations" bindingOperationName="RetrievePatientCorrelations" type="Request-Response" outputName="RetrievePatientCorrelationsResponse" inputName="RetrievePatientCorrelationsRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:testSuite name="PatientCorrelationFacade"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add multiple #1" searchProperties="true" id="8dc150a5-1a1f-4d27-847d-cc1a547422c9"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://172.16.50.82:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://172.16.50.82:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//192.168.25.157/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:10080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table" disabled="true"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Add multiple #1</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://172.16.50.82:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>Test01</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>Test02</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://172.16.50.82:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.4</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#RemoteSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#RemoteAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add multiple #2" searchProperties="true" id="0f618253-8e07-4ece-9b3e-64506dfb8e5f"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Add multiple #2</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000000</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#RemoteSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#RemoteAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Retrieve" searchProperties="true" id="bf66fd84-3712-445b-9163-772993f29e8c"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Simple Retrieve</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000000</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000000</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#LocalSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#LocalAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Retrieve with multiple in repository" searchProperties="true" id="c1e6b3dd-ca9b-42d1-848a-4169de65fe80"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Simple Retrieve - multi repo</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000001</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#LocalSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#LocalAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Multiple results" searchProperties="true" id="d29dbbfd-8645-4ee8-a21e-698da2303543"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Multiple results</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>IHS50002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000001</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>D123402</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#LocalAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Retrieve with empty repository" searchProperties="true" id="dddd9bf0-3549-4556-8817-4128133ac1dd"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Retrieve with empty repository</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000005</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="Simple Contains"><con:configuration><token>"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Retrieve with no results" searchProperties="true" id="e18fb16c-201d-45c4-8e5c-ab54d54ba018"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Retrieve with no results</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (localSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value/></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value/></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000001</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="Simple Contains"><con:configuration><token>"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Revoke" searchProperties="true" id="0a6fd00c-f9c2-42e5-b660-1426e7d2ff8a"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Revoke</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>endpointTransfer3</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Simple Revoke</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123411</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000009</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123411</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000009</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Revoke Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Revoke</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RemovePatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Revoke</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RemovePatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Revoke</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RemovePatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Revoke</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RemovePatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Revoke"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RemovePatientCorrelation</con:operation><con:request name="Revoke"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://MHSNHIE3.fedsconnect.org:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RemovePatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.4</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000000</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.3</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RemovePatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Retrieve Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Retrieve</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000009</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="Simple Contains"><con:configuration><token>"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Translate" searchProperties="true" id="f8a794e0-76e9-452a-ac28-e360a84e004a"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Simple Translate</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>IHS500001</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>3.3</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Translate Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:TargetAssigningAuthority[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Translate"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Translate"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123401</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>2.2</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#RemoteSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#RemoteAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Translate with multiple in repository" searchProperties="true" id="ae34260c-2495-4533-a76d-f6cd81c38393"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Simple Translate - multi rep</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Translate Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:TargetAssigningAuthority[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Translate"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Translate"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123402</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>2.2</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:SubjectIdentifier[1]</path><content>${SelectedPatientData#RemoteSubjectID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns4='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//ns4:RetrievePatientCorrelationsResponse[1]/ns4:QualifiedPatientIdentifier[1]/ns2:AssigningAuthorityIdentifier[1]</path><content>${SelectedPatientData#RemoteAssigningAuthorityID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Target PC does not exist" searchProperties="true" id="a680b701-7bea-440b-8e61-6f5d8a5c2c9f"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Target PC does not exist</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value/></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>4.4</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Translate Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:TargetAssigningAuthority[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Translate"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Translate"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://172.16.50.82:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:RetrievePatientCorrelationsRequest xmlns:msgns="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade" xmlns:ns1="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns1:QualifiedPatientIdentifier>
            <nccommon:SubjectIdentifier xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">D123401</nccommon:SubjectIdentifier>
            <nccommon:AssigningAuthorityIdentifier xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">1.4</nccommon:AssigningAuthorityIdentifier>
         </ns1:QualifiedPatientIdentifier>
         <ns1:TargetAssigningAuthority>1.3</ns1:TargetAssigningAuthority>
      </ns1:RetrievePatientCorrelationsRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="Simple Contains"><con:configuration><token>"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Target patient does not exist" searchProperties="true" id="389f28f2-895b-40f7-92ee-698c33991a87"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/projects/nhinc/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>epcuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>epcpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://mhsnhie2.fedsconnect.org:18181/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteSystem</con:name><con:value>dvanhie2.fedsconnect.org</con:value></con:property><con:property><con:name>SUT.LocalSystem</con:name><con:value>mhsnhie2.fedsconnect.org</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set patient correlation facade endpoint URL"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" disabled="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer1</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>endpointTransfer2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Test Case Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Target patient does not exist</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:AddPatientCorrelationRequest[1]/urn:QualifiedPatientIdentifier[2]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123404</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value/></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123403</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>500000002</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Translate Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubjectIdentifier</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:SubjectIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>AssigningAuthorityIdentifier</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:QualifiedPatientIdentifier[1]/urn1:AssigningAuthorityIdentifier[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Translate</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
//urn:RetrievePatientCorrelationsRequest[1]/urn:TargetAssigningAuthority[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Translate"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Translate"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>D123404</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>2.2</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:assertion type="Simple Contains"><con:configuration><token>"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:setupScript>
</con:setupScript><con:properties/></con:testCase><con:properties/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>