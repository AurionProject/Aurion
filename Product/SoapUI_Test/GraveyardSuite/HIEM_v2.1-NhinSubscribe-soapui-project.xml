<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="HIEM v2.1 - Nhin Subscribe" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NhincProxyNotificationProducerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincproxysubscriptionmanagement}NhincProxyNotificationProducerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincProxySubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincProxyNotificationProducer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" outputName="SubscribeResponse" inputName="SubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NhincProxySubscriptionManagerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincproxysubscriptionmanagement}NhincProxySubscriptionManagerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincProxySubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincProxySubscriptionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Unsubscribe" name="Unsubscribe" bindingOperationName="Unsubscribe" type="Request-Response" outputName="UnsubscribeResponse" inputName="UnsubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NhincProxyNotificationConsumerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincproxynotificationconsumer}NhincProxyNotificationConsumerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincProxyNotificationConsumer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincProxyNotificationConsumer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="One-Way" inputName="NotifyRequest" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="auto generated"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincProxyNotificationConsumer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:NotifyRequest>
         <b:Notify>
            <!--1 or more repetitions:-->
            <b:NotificationMessage>
               <!--Optional:-->
               <b:SubscriptionReference>
                  <add:Address>?</add:Address>
                  <!--Optional:-->
                  <add:ReferenceParameters>
                     <!--You may enter ANY elements at this point-->
                  </add:ReferenceParameters>
                  <!--Optional:-->
                  <add:Metadata>
                     <!--You may enter ANY elements at this point-->
                  </add:Metadata>
                  <!--You may enter ANY elements at this point-->
               </b:SubscriptionReference>
               <!--Optional:-->
               <b:Topic Dialect="?">
                  e
                  <!--You may enter ANY elements at this point-->
                  gero
               </b:Topic>
               <!--Optional:-->
               <b:ProducerReference>
                  <add:Address>?</add:Address>
                  <!--Optional:-->
                  <add:ReferenceParameters>
                     <!--You may enter ANY elements at this point-->
                  </add:ReferenceParameters>
                  <!--Optional:-->
                  <add:Metadata>
                     <!--You may enter ANY elements at this point-->
                  </add:Metadata>
                  <!--You may enter ANY elements at this point-->
               </b:ProducerReference>
               <b:Message>
                  <!--You may enter ANY elements at this point-->
               </b:Message>
            </b:NotificationMessage>
            <!--You may enter ANY elements at this point-->
         </b:Notify>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>?</urn1:dateOfBirth>
            <urn1:dateOfSignature>?</urn1:dateOfSignature>
            <urn1:expirationDate>?</urn1:expirationDate>
            <urn1:explanationNonClaimantSignature>?</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>?</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>?</urn1:haveSignature>
            <urn1:haveWitnessSignature>?</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>?</urn1:description>
               <urn1:homeCommunityId>?</urn1:homeCommunityId>
               <urn1:name>?</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:purposeOfDisclosure>?</urn1:purposeOfDisclosure>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>?</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>?</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>?</urn1:familyName>
                  <urn1:givenName>?</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>?</urn1:code>
                     <urn1:codeSystem>?</urn1:codeSystem>
                     <urn1:codeSystemName>?</urn1:codeSystemName>
                     <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                     <urn1:displayName>?</urn1:displayName>
                     <urn1:originalText>?</urn1:originalText>
                     <!--1 or more repetitions:-->
                     <urn1:translation/>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
               </urn1:personName>
               <urn1:userName>?</urn1:userName>
               <urn1:role>?</urn1:role>
               <urn1:org>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>?</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--1 or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>?</urn1:authorized>
            <!--Optional:-->
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>?</urn1:code>
               <urn1:codeSystem>?</urn1:codeSystem>
               <urn1:codeSystemName>?</urn1:codeSystemName>
               <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
               <urn1:displayName>?</urn1:displayName>
               <urn1:originalText>?</urn1:originalText>
               <!--1 or more repetitions:-->
               <urn1:translation/>
            </urn1:purposeOfDisclosureCoded>
            <!--Optional:-->
            <urn1:claimFormRef>?</urn1:claimFormRef>
            <!--Optional:-->
            <urn1:claimFormRaw>cid:18082082533</urn1:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <!--You have a CHOICE of the next 3 items at this level-->
            <urn1:epr>
               <urn1:EndpointReference>
                  <add1:Address>?</add1:Address>
                  <!--Optional:-->
                  <add1:ReferenceProperties>
                     <!--You may enter ANY elements at this point-->
                  </add1:ReferenceProperties>
                  <!--Optional:-->
                  <add1:ReferenceParameters>
                     <!--You may enter ANY elements at this point-->
                  </add1:ReferenceParameters>
                  <!--Optional:-->
                  <add1:PortType>?</add1:PortType>
                  <!--Optional:-->
                  <add1:ServiceName PortName="?">?</add1:ServiceName>
                  <!--You may enter ANY elements at this point-->
               </urn1:EndpointReference>
            </urn1:epr>
            <urn1:homeCommunity>
               <urn1:description>?</urn1:description>
               <urn1:homeCommunityId>?</urn1:homeCommunityId>
               <urn1:name>?</urn1:name>
            </urn1:homeCommunity>
            <urn1:url>?</urn1:url>
         </urn:nhinTargetSystem>
      </urn:NotifyRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhincproxynotificationconsumer/NhincProxyNotificationConsumerPortType/NotifyRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="HiemSubscriptionRepositoryUtilPortTypeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil}HiemSubscriptionRepositoryUtilPortTypeBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/HiemSubscriptionRepositoryUtil.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:EmptySubscriptionRepository" name="EmptySubscriptionRepository" bindingOperationName="EmptySubscriptionRepository" type="Request-Response" outputName="EmptySubscriptionRepositoryResponse" inputName="EmptySubscriptionRepositoryRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil/HiemSubscriptionRepositoryUtilPortType/EmptySubscriptionRepositoryRequest"/></con:call></con:operation><con:operation isOneWay="false" action="urn:GetSubscriptionCount" name="GetSubscriptionCount" bindingOperationName="GetSubscriptionCount" type="Request-Response" outputName="GetSubscriptionCountResponse" inputName="GetSubscriptionCountRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil/HiemSubscriptionRepositoryUtilPortType/GetSubscriptionCountRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="EntityNotificationConsumerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entitynotificationconsumer}EntityNotificationConsumerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/EntityNotificationConsumer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityNotificationConsumer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="Request-Response" outputName="NotifyResponse" inputName="NotifyRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfCdcBioPackage" name="NotifySubscribersOfCdcBioPackage" bindingOperationName="NotifySubscribersOfCdcBioPackage" type="Request-Response" outputName="NotifySubscribersOfCdcBioPackageResponse" inputName="NotifySubscribersOfCdcBioPackageRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfDocument" name="NotifySubscribersOfDocument" bindingOperationName="NotifySubscribersOfDocument" type="Request-Response" outputName="NotifySubscribersOfDocumentResponse" inputName="NotifySubscribersOfDocumentRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="SubscriptionManagerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}SubscriptionManagerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincSubscriptionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Unsubscribe" name="Unsubscribe" bindingOperationName="Unsubscribe" type="Request-Response" outputName="UnsubscribeResponse" inputName="UnsubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NotificationConsumerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}NotificationConsumerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincNotificationConsumer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="One-Way" inputName="NotifyRequest" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NotificationProducerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}NotificationProducerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincNotificationProducer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" outputName="SubscribeResponse" inputName="SubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterSubscriptionManagerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement}AdapterSubscriptionManagerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/projects/nhinc/Current/Product/Production/Common/Interfaces/src/wsdl/AdapterSubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/AdapterSubscriptionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Unsubscribe" name="Unsubscribe" bindingOperationName="Unsubscribe" type="Request-Response" outputName="UnsubscribeResponse" inputName="UnsubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterNotificationProducerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement}AdapterNotificationProducerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/projects/nhinc/Current/Product/Production/Common/Interfaces/src/wsdl/AdapterSubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:18081/mockAdapterSubscribe</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" outputName="SubscribeResponse" inputName="SubscribeRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:18081/mockAdapterSubscribe</con:endpoint><con:request><![CDATA[<soapenv:Envelope 
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:add="http://www.w3.org/2005/08/addressing" 
xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter"> 
         <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" >
         </wsnt:Subscribe>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement/AdapterNotificationProducerPortType/SubscribeRequest"/></con:call><con:call name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:18081/mockAdapterSubscribe</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <b:Subscribe>
            <b:ConsumerReference>
               <add:Address>?</add:Address>
               <!--Optional:-->
               <add:ReferenceParameters>
                  <!--You may enter ANY elements at this point-->
               </add:ReferenceParameters>
               <!--Optional:-->
               <add:Metadata>
                  <!--You may enter ANY elements at this point-->
               </add:Metadata>
               <!--You may enter ANY elements at this point-->
            </b:ConsumerReference>
            <!--Optional:-->
            <b:Filter>
               <!--You may enter ANY elements at this point-->
            </b:Filter>
            <!--Optional:-->
            <b:InitialTerminationTime>?</b:InitialTerminationTime>
            <!--Optional:-->
            <b:SubscriptionPolicy>
               <!--You may enter ANY elements at this point-->
            </b:SubscriptionPolicy>
            <!--You may enter ANY elements at this point-->
         </b:Subscribe>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>?</urn1:dateOfBirth>
            <urn1:dateOfSignature>?</urn1:dateOfSignature>
            <urn1:expirationDate>?</urn1:expirationDate>
            <urn1:explanationNonClaimantSignature>?</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>?</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>?</urn1:haveSignature>
            <urn1:haveWitnessSignature>?</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>?</urn1:description>
               <urn1:homeCommunityId>?</urn1:homeCommunityId>
               <urn1:name>?</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:purposeOfDisclosure>?</urn1:purposeOfDisclosure>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>?</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>?</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>?</urn1:familyName>
                  <urn1:givenName>?</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>?</urn1:code>
                     <urn1:codeSystem>?</urn1:codeSystem>
                     <urn1:codeSystemName>?</urn1:codeSystemName>
                     <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                     <urn1:displayName>?</urn1:displayName>
                     <urn1:originalText>?</urn1:originalText>
                     <!--Zero or more repetitions:-->
                     <urn1:translation/>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
               </urn1:personName>
               <urn1:userName>?</urn1:userName>
               <urn1:role>?</urn1:role>
               <urn1:org>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>?</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>?</urn1:authorized>
            <!--Optional:-->
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>?</urn1:code>
               <urn1:codeSystem>?</urn1:codeSystem>
               <urn1:codeSystemName>?</urn1:codeSystemName>
               <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
               <urn1:displayName>?</urn1:displayName>
               <urn1:originalText>?</urn1:originalText>
               <!--Zero or more repetitions:-->
               <urn1:translation/>
            </urn1:purposeOfDisclosureCoded>
            <!--Optional:-->
            <urn1:claimFormRef>?</urn1:claimFormRef>
            <!--Optional:-->
            <urn1:claimFormRaw>cid:1024980076411</urn1:claimFormRaw>
         </urn:assertion>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement/AdapterNotificationProducerPortType/SubscribeRequest"/></con:call></con:operation><con:operation isOneWay="false" action="urn:SubscribeCdcBioPackage" name="SubscribeCdcBioPackage" bindingOperationName="SubscribeCdcBioPackage" type="Request-Response" outputName="SubscribeCdcBioPackageResponse" inputName="SubscribeCdcBioPackageRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:SubscribeDocument" name="SubscribeDocument" bindingOperationName="SubscribeDocument" type="Request-Response" outputName="SubscribeDocumentResponse" inputName="SubscribeDocumentRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AuditRepositoryManagerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentauditrepository}AuditRepositoryManagerBinding" soapVersion="1_1" anonymous="optional" definition="../Production/Common/Interfaces/src/wsdl/NhincComponentAuditRepository.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:LogEvent" name="LogEvent" bindingOperationName="LogEvent" type="Request-Response" outputName="LogEventResponse" inputName="LogEventRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:auditlog" xmlns:aud="http://nhinc.services.com/schema/auditmessage">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:LogEventRequest>
         <aud:AuditMessage>
            <aud:EventIdentification EventActionCode="?" EventDateTime="?" EventOutcomeIndicator="?">
               <aud:EventID code="?" codeSystem="?" codeSystemName="?" displayName="?" originalText="?"/>
               <!--Zero or more repetitions:-->
               <aud:EventTypeCode code="?" codeSystem="?" codeSystemName="?" displayName="?" originalText="?"/>
            </aud:EventIdentification>
            <!--1 or more repetitions:-->
            <aud:ActiveParticipant UserID="?" AlternativeUserID="?" UserName="?" UserIsRequestor="true" NetworkAccessPointID="?" NetworkAccessPointTypeCode="?">
               <!--Zero or more repetitions:-->
               <aud:RoleIDCode code="?" codeSystem="?" codeSystemName="?" displayName="?" originalText="?"/>
            </aud:ActiveParticipant>
            <!--1 or more repetitions:-->
            <aud:AuditSourceIdentification AuditEnterpriseSiteID="?" AuditSourceID="?">
               <!--Zero or more repetitions:-->
               <aud:AuditSourceTypeCode code="?" codeSystem="?" codeSystemName="?" displayName="?" originalText="?"/>
            </aud:AuditSourceIdentification>
            <!--Zero or more repetitions:-->
            <aud:ParticipantObjectIdentification ParticipantObjectID="?" ParticipantObjectTypeCode="?" ParticipantObjectTypeCodeRole="?" ParticipantObjectDataLifeCycle="?" ParticipantObjectSensitivity="?">
               <aud:ParticipantObjectIDTypeCode code="?" codeSystem="?" codeSystemName="?" displayName="?" originalText="?"/>
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--Optional:-->
               <aud:ParticipantObjectName>?</aud:ParticipantObjectName>
               <!--Optional:-->
               <aud:ParticipantObjectQuery>cid:468313022708</aud:ParticipantObjectQuery>
               <!--Zero or more repetitions:-->
               <aud:ParticipantObjectDetail type="?" value="cid:566315638367"/>
            </aud:ParticipantObjectIdentification>
         </aud:AuditMessage>
         <urn:direction>?</urn:direction>
         <urn:interface>?</urn:interface>
      </urn:LogEventRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentauditrepository/AuditRepositoryManagerPortType/LogEventRequest"/></con:call></con:operation><con:operation isOneWay="false" action="urn:QueryAuditEvents" name="QueryAuditEvents" bindingOperationName="QueryAuditEvents" type="Request-Response" outputName="QueryAuditEventsResponse" inputName="QueryAuditEventsRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:aud="http://nhinc.services.com/schema/auditmessage" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:FindCommunitiesAndAuditEventsRequest>
         <aud:FindAuditEvents>
            <aud:patientId>?</aud:patientId>
            <aud:userId>?</aud:userId>
            <aud:beginDateTime>?</aud:beginDateTime>
            <aud:endDateTime>?</aud:endDateTime>
         </aud:FindAuditEvents>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>?</urn1:dateOfBirth>
            <urn1:dateOfSignature>?</urn1:dateOfSignature>
            <urn1:expirationDate>?</urn1:expirationDate>
            <urn1:explanationNonClaimantSignature>?</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>?</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>?</urn1:haveSignature>
            <urn1:haveWitnessSignature>?</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>?</urn1:description>
               <urn1:homeCommunityId>?</urn1:homeCommunityId>
               <urn1:name>?</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:purposeOfDisclosure>?</urn1:purposeOfDisclosure>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>?</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>?</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>?</urn1:city>
               <urn1:country>?</urn1:country>
               <urn1:state>?</urn1:state>
               <urn1:streetAddress>?</urn1:streetAddress>
               <urn1:zipCode>?</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>?</urn1:familyName>
               <urn1:givenName>?</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>?</urn1:areaCode>
               <urn1:countryCode>?</urn1:countryCode>
               <urn1:extension>?</urn1:extension>
               <urn1:localNumber>?</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>?</urn1:familyName>
                  <urn1:givenName>?</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>?</urn1:code>
                     <urn1:codeSystem>?</urn1:codeSystem>
                     <urn1:codeSystemName>?</urn1:codeSystemName>
                     <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                     <urn1:displayName>?</urn1:displayName>
                     <urn1:originalText>?</urn1:originalText>
                     <!--Zero or more repetitions:-->
                     <urn1:translation/>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>?</urn1:secondNameOrInitials>
               </urn1:personName>
               <urn1:userName>?</urn1:userName>
               <urn1:role>?</urn1:role>
               <urn1:org>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>?</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>?</urn1:code>
                  <urn1:codeSystem>?</urn1:codeSystem>
                  <urn1:codeSystemName>?</urn1:codeSystemName>
                  <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
                  <urn1:displayName>?</urn1:displayName>
                  <urn1:originalText>?</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>?</urn1:authorized>
            <!--Optional:-->
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>?</urn1:code>
               <urn1:codeSystem>?</urn1:codeSystem>
               <urn1:codeSystemName>?</urn1:codeSystemName>
               <urn1:codeSystemVersion>?</urn1:codeSystemVersion>
               <urn1:displayName>?</urn1:displayName>
               <urn1:originalText>?</urn1:originalText>
               <!--Zero or more repetitions:-->
               <urn1:translation/>
            </urn1:purposeOfDisclosureCoded>
            <!--Optional:-->
            <urn1:claimFormRef>?</urn1:claimFormRef>
            <!--Optional:-->
            <urn1:claimFormRaw>cid:1196389307626</urn1:claimFormRaw>
         </urn:assertion>
      </urn:FindCommunitiesAndAuditEventsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentauditrepository/AuditRepositoryManagerPortType/QueryAuditEventsRequest"/></con:call></con:operation></con:interface><con:testSuite name="HIEM v2.1 (Nhin Subscribe)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="BasicSubscribe" searchProperties="true" id="beb4f56c-6813-4d5f-affa-ee006f176249"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","policyengineservice","http://localhost:9080/NhinConnect/AdapterPolicyEngine",context,log);


</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CheckSubscriptionReference" searchProperties="true" id="722e8120-b649-400c-aa68-847492d83b80"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SubscribeMultiple" searchProperties="true" id="f46a97b7-5370-4623-b1c7-9bb3b8f10726"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe.1</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>GetSubscriptionCount-2</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 2</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe.1</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe.1</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe.2</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>subscribe.2</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe.1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe.1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper/1</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe.2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe.2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper/2</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ServiceNotEnabled" searchProperties="true" id="7c83f61c-c3ce-4b0d-9478-fb1c39677e76"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","NA",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","NA",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubscribeProxyEndpoint</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">nhin:SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TopicNotSupported" searchProperties="true" id="149c5bc3-71cd-4942-ae8f-5450cef957b2"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - still 0</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">UnsupportedTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace s="http://www.w3.org/2003/05/soap-envelope"
exists(//detail/wsnt:TopicNotSupportedFault)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - still 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - still 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="UnknownTopic" searchProperties="true" id="8bca5a92-7f7f-43be-badc-68a065446b1f"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - still 0</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">UnknownTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace s="http://www.w3.org/2003/05/soap-envelope"
exists(//detail/wsnt:TopicNotSupportedFault)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - still 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - still 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Subscribe - Adapter Passthrough" searchProperties="true" id="fdc1de9e-897f-4237-a8b6-c800a80582fe"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","NA",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>SubscribeEndpoint</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://doc.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="urn:nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="Check for Subscription Reference"><con:configuration><path>declare namespace ns2='http://docs.oasis-open.org/wsn/b-2';
exists( //ns2:SubscribeResponse/ns2:SubscriptionReference)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Check Subscription Address"><con:configuration><path>declare namespace ns2='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns1='http://www.w3.org/2005/08/addressing';
//ns2:SubscribeResponse[1]/ns2:SubscriptionReference[1]/ns1:Address[1]/text()</path><content>MockAdapterSubscriptionAddress</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="Hiem Subscribe Adapter Mock Service"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:path>/mockAdapterNotificationProducer</con:path><con:port>18080</con:port><con:response><con:settings/><con:responseContent><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <ns1:SubscribeResponse xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:msgns="urn:gov:hhs:fha:nhinc:nhincproxysubscriptionmanagement" xmlns:ns0="urn:gov:hhs:fha:nhinc:nhincproxysubscriptionmanagement" xmlns:ns2="http://docs.oasis-open.org/wsn/b-2" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="http://docs.oasis-open.org/wsn/t-1" xmlns:ns5="http://www.hhs.gov/healthit/nhin" xmlns:ns6="http://docs.oasis-open.org/wsrf/r-2" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://docs.oasis-open.org/wsn/b-2">
         <ns2:SubscriptionReference>
            <Address>MockAdapterSubscriptionAddress</Address>
         </ns2:SubscriptionReference>
         <ns2:CurrentTime>2009-05-16T15:28:18.67-05:00</ns2:CurrentTime>
         <ns2:TerminationTime xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </ns1:SubscribeResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response><con:assertion type="XPath Match" name="Check Topic"><con:configuration><path>declare namespace ns13='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns7='http://docs.oasis-open.org/wsn/b-2';
//ns13:SubscribeRequest[1]/ns7:Subscribe[1]/ns7:Filter[1]/ns7:TopicExpression[1]/text()</path><content>SomeTopic</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Check Notify Address"><con:configuration><path>declare namespace ns13='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace ns7='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns6='http://www.w3.org/2005/08/addressing';
//ns13:SubscribeRequest[1]/ns7:Subscribe[1]/ns7:ConsumerReference[1]/ns6:Address[1]/text()</path><content>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="MissingConsumerReference" searchProperties="true" id="4daf6adb-78d4-4fdd-8be3-7460435b191a" disabled="true"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - still 0</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">nhin:SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - still 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - still 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ConcreteTopicNotSupported" searchProperties="true" id="dcc8fbef-2a99-4bba-bae5-bef0e45ddf0e"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - still 0</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://doc.oasis-open.org/wsn/t-1/TopicExpression/Concrete">parent/unsupportedchild</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Schema Compliance" disabled="true"><con:configuration><definition/></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - still 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - still 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ConcreteTopic" searchProperties="true" id="fa482f8a-59a6-4d42-acb0-edc73c2220b4"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://doc.oasis-open.org/wsn/t-1/TopicExpression/Concrete" xmlns:nhin="http://www.hhs.gov/healthit/nhin">parent/child</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ForwardAdapterSubscriptionMode" searchProperties="true" id="4726f9c1-35fd-4b56-ab35-780c64b6f360"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","forward",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="mock adapter subscribe"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:path>/mockAdapterNotificationProducer</con:path><con:port>18080</con:port><con:timeout>30000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <wsnt:SubscribeResponse>
         <wsnt:SubscriptionReference>
            <wsa:Address>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</wsa:Address>
            <wsa:ReferenceParameters>
               <adapter:Key xmlns:adapter="http://adapter.org/">subscription-XYZ</adapter:Key>
            </wsa:ReferenceParameters>
         </wsnt:SubscriptionReference>
      </wsnt:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DocumentSubscriptionV1Format" searchProperties="true" id="d10f3cdf-f037-425a-b9c7-75bd9d5a532e"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:Slot name="$XDSDocumentEntryPatientId">
                  <rim:ValueList>
                     <rim:Value>222498764^^^&amp;2.16.840.1.113883.3.18.103&amp;ISO</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
               <rim:Slot name="$XDSDocumentEntryClassCode">
                  <rim:ValueList>
                     <rim:Value>('XNHIN-CONSENT')</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
            </rim:AdhocQuery>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ProxySubscribe" searchProperties="true" id="883f2d86-7fc9-415a-a75c-63ee29553ab2" disabled="true"><con:settings/><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:description>soapui->proxy->helper->mock</con:description><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">nhin:SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscriptionTestHelper</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="update config" disabled="true"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
</script></con:config></con:testStep><con:testStep type="mockresponse" name="mock Adapter Notification Producer"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:path>/nhincSubscriptionMock</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <wsnt:SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing">
         <wsnt:SubscriptionReference>
            <wsa:Address>MockAdapterSubscriptionAddress</wsa:Address>
         </wsnt:SubscriptionReference>
      </wsnt:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>
]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Subscribe-topic has prefix" searchProperties="true" id="d858cbd5-3702-43fe-a731-6e031e6927f7" disabled="true"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer                                    </con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer                                    </con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">nhin:TopicWithPrefix</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CreateChildSubscriptionAdapterSubscriptionMode" searchProperties="true" id="96e6895c-3858-4901-9265-e6d330eeab78"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","createchildsubscription",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (proxy)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" useXQuery="false" entitize="false" transferToAll="false"><con:name>subscribe (nhin)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 2</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
exists(//ns1:EmptySubscriptionRepositoryResponse)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="http://www.hhs.gov/healthit/nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="SubscriptionId"><con:configuration><path>declare namespace SubscriptionId='http://www.hhs.gov/healthit/nhin';
declare namespace ns3='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
exists(//ns3:SubscribeResponse/ns3:SubscriptionReference/ns2:ReferenceParameters/SubscriptionId:SubscriptionId)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="Subscription reference address"><con:configuration><path>declare namespace ns1='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns2='http://www.w3.org/2005/08/addressing';
//ns1:SubscribeResponse/ns1:SubscriptionReference/ns2:Address</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Schema Compliance"><con:configuration><definition/></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="mock adapter subscribe"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AdapterNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:path>/mockAdapterNotificationProducer</con:path><con:port>18080</con:port><con:timeout>30000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <wsnt:SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing">
         <wsnt:SubscriptionReference>
            <wsa:Address>MockAdapterSubscriptionAddress</wsa:Address>
         </wsnt:SubscriptionReference>
      </wsnt:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response><con:assertion type="XPath Match" name="consumer reference exists"><con:configuration><path>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';

exists(//urn:SubscribeRequest/wsnt:Subscribe/wsnt:ConsumerReference)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="consumer reference address"><con:configuration><path>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';
//urn:SubscribeRequest/wsnt:Subscribe/wsnt:ConsumerReference/wsa:Address</path><content>http://localhost:9080/NhinConnect/NhincProxyNotificationConsumer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="topic"><con:configuration><path>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
//urn:SubscribeRequest/wsnt:Subscribe/wsnt:Filter/wsnt:TopicExpression/text()</path><content>SomeTopic</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="assertion exists" disabled="true"><con:configuration><path>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
exists(//urn:SubscribeRequest/urn:assertion)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion></con:config></con:testStep><con:testStep type="request" name="get subscription count - 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="count"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="BasicSubscribe - Validate Logging" searchProperties="true" id="3359411d-95a5-4596-a9e5-d7b5e3d13617"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>AuditRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="Log Query Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>StartTime</con:name><con:value>2009-07-15T19:35:39.385Z</con:value></con:property><con:property><con:name>EndTime</con:name><con:value>2009-07-15T19:35:41.392Z</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="update config"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","hiem.AdapterSubscriptionMode","disabled",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceAuditRepository","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","auditrepository","http://localhost:8080/NhinConnect/AuditRepositoryManagerService",context,log);
</script></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 1</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe doc(endpoint)</con:name><con:sourceType>SUT.HIEM.ProxySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe document</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>subscribe doc (target)</con:name><con:sourceType>SUT.HIEM.NhinSubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>subscribe document</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:nhinTargetSystem[1]/urn1:url[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Logging Start Time"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

// Sample datetime: 2009-06-19T15:17:35.192Z
sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "Log Query Properties", "StartTime", creationTimeStr);
</script></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe document"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincProxyNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe document"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonproxy" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add1="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:Slot name="$XDSDocumentEntryPatientId">
                  <rim:ValueList>
                     <rim:Value>222498764^^^&amp;2.16.840.1.113883.3.18.103&amp;ISO</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
               <rim:Slot name="$XDSDocumentEntryClassCode">
                  <rim:ValueList>
                     <rim:Value>('XNHIN-CONSENT')</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
            </rim:AdhocQuery>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <urn:nhinTargetSystem>
            <urn1:url>https://localhost:8181/NotificationProducerService/HiemSubscription</urn1:url>
         </urn:nhinTargetSystem>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set Logging Stop Time"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

// Sample datetime: 2009-06-19T15:17:35.192Z
sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "Log Query Properties", "EndTime", creationTimeStr);
</script></con:config></con:testStep><con:testStep type="transfer" name="Set Audit Parameters"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>StartTime</con:name><con:sourceType>StartTime</con:sourceType><con:sourceStep>Log Query Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>QueryAuditEvents</con:targetStep><con:targetPath>declare namespace aud='http://nhinc.services.com/schema/auditmessage';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//urn:FindCommunitiesAndAuditEventsRequest[1]/aud:FindAuditEvents[1]/aud:beginDateTime[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>EndTime</con:name><con:sourceType>EndTime</con:sourceType><con:sourceStep>Log Query Properties</con:sourceStep><con:sourcePath/><con:targetType>Request</con:targetType><con:targetStep>QueryAuditEvents</con:targetStep><con:targetPath>declare namespace aud='http://nhinc.services.com/schema/auditmessage';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//urn:FindCommunitiesAndAuditEventsRequest[1]/aud:FindAuditEvents[1]/aud:endDateTime[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false"><con:name>UserId</con:name><con:sourceType>Request</con:sourceType><con:sourceStep>subscribe document</con:sourceStep><con:sourcePath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonproxy';
declare namespace nccommon='urn:gov:hhs:fha:nhinc:common:nhinccommon';
//urn:SubscribeRequest[1]/urn:assertion[1]/nccommon:userInfo[1]/nccommon:userName[1]</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>QueryAuditEvents</con:targetStep><con:targetPath>declare namespace aud='http://nhinc.services.com/schema/auditmessage';
declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//urn:FindCommunitiesAndAuditEventsRequest[1]/aud:FindAuditEvents[1]/aud:userId[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>AuditRepEndpoint</con:name><con:sourceType>AuditRepository.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>Endpoint</con:targetType><con:targetStep>QueryAuditEvents</con:targetStep><con:targetPath/></con:transfers></con:config></con:testStep><con:testStep type="request" name="QueryAuditEvents"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AuditRepositoryManagerBinding</con:interface><con:operation>QueryAuditEvents</con:operation><con:request name="QueryAuditEvents"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/AuditRepositoryManagerService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:aud="http://nhinc.services.com/schema/auditmessage" xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:FindCommunitiesAndAuditEventsRequest>
         <aud:FindAuditEvents>
            <aud:patientId/>
            <aud:userId>user1</aud:userId>
            <aud:beginDateTime>2009-07-15T19:35:39.385Z</aud:beginDateTime>
            <aud:endDateTime>2009-07-15T19:35:41.392Z</aud:endDateTime>
         </aud:FindAuditEvents>
         <urn:assertion>
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
      </urn:FindCommunitiesAndAuditEventsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match" name="XPath Match - Result 1"><con:configuration><path>declare namespace ns16='http://nhinc.services.com/schema/auditmessage';
declare namespace ns18='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns18:FindCommunitiesAndAuditEventsResponse[1]/ns18:findAuditEventResponse[1]/ns16:findAuditEventsReturn[1]/ns16:EventIdentification[1]/ns16:EventID[1]/@code</path><content>SUB</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>true</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - Result2"><con:configuration><path>declare namespace ns16='http://nhinc.services.com/schema/auditmessage';
declare namespace ns18='urn:gov:hhs:fha:nhinc:common:nhinccommonadapter';
//ns18:FindCommunitiesAndAuditEventsResponse[1]/ns18:findAuditEventResponse[1]/ns16:findAuditEventsReturn[2]/ns16:EventIdentification[1]/ns16:EventID[1]/@code</path><content>SUB</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig action="urn:gov:hhs:fha:nhinc:nhinccomponentauditrepository/AuditRepositoryManagerPortType/QueryAuditEventsRequest" mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="18081" path="/mockAdapterSubscribe" name="adapter subscribe" host="Tiller-PC" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="Subscribe" interface="AdapterNotificationProducerBindingSoap11" operation="Subscribe"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:x='urn:x' xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-22" xmlns:wsa="http://www.w3.org/2005/08/addressing2">
   <soapenv:Header/>
   <soapenv:Body>
      <wsnt:SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2">
         <wsnt:SubscriptionReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsa:Address>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</wsa:Address>
            <wsa:ReferenceParameters>
               <adapter:Key xmlns:adapter="http://adapter.org/">subscription-XYZ</adapter:Key>
            </wsa:ReferenceParameters>
         </wsnt:SubscriptionReference>
      </wsnt:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>
]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement/AdapterNotificationProducerPortType/SubscribeResponse"/></con:response><con:response name="MockResponse 2" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <b:SubscribeResponse>
         <b:SubscriptionReference>
            <add:Address>?</add:Address>
            <!--Optional:-->
            <add:ReferenceParameters>
               <!--You may enter ANY elements at this point-->
            </add:ReferenceParameters>
            <!--Optional:-->
            <add:Metadata>
               <!--You may enter ANY elements at this point-->
            </add:Metadata>
            <!--You may enter ANY elements at this point-->
         </b:SubscriptionReference>
         <!--Optional:-->
         <b:CurrentTime>?</b:CurrentTime>
         <!--Optional:-->
         <b:TerminationTime>?</b:TerminationTime>
         <!--You may enter ANY elements at this point-->
      </b:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adaptersubscriptionmanagement/AdapterNotificationProducerPortType/SubscribeResponse"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>