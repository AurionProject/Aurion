<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="HIEM v2.1 - Agency Subscribe" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="HiemSubscriptionRepositoryUtilPortTypeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil}HiemSubscriptionRepositoryUtilPortTypeBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/HiemSubscriptionRepositoryUtil.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:EmptySubscriptionRepository" name="EmptySubscriptionRepository" bindingOperationName="EmptySubscriptionRepository" type="Request-Response" outputName="EmptySubscriptionRepositoryResponse" inputName="EmptySubscriptionRepositoryRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil/HiemSubscriptionRepositoryUtilPortType/EmptySubscriptionRepositoryRequest"/></con:call></con:operation><con:operation isOneWay="false" action="urn:GetSubscriptionCount" name="GetSubscriptionCount" bindingOperationName="GetSubscriptionCount" type="Request-Response" outputName="GetSubscriptionCountResponse" inputName="GetSubscriptionCountRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:${HttpDefaultPort}/Nhinc/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:hiemsubscriptionrepositoryutil/HiemSubscriptionRepositoryUtilPortType/GetSubscriptionCountRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="EntityNotificationConsumerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entitynotificationconsumer}EntityNotificationConsumerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/EntityNotificationConsumer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityNotificationConsumer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="Request-Response" outputName="NotifyResponse" inputName="NotifyRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfCdcBioPackage" name="NotifySubscribersOfCdcBioPackage" bindingOperationName="NotifySubscribersOfCdcBioPackage" type="Request-Response" outputName="NotifySubscribersOfCdcBioPackageResponse" inputName="NotifySubscribersOfCdcBioPackageRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfDocument" name="NotifySubscribersOfDocument" bindingOperationName="NotifySubscribersOfDocument" type="Request-Response" outputName="NotifySubscribersOfDocumentResponse" inputName="NotifySubscribersOfDocumentRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="SubscriptionManagerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}SubscriptionManagerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincSubscriptionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Unsubscribe" name="Unsubscribe" bindingOperationName="Unsubscribe" type="Request-Response" outputName="UnsubscribeResponse" inputName="UnsubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NotificationConsumerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}NotificationConsumerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincNotificationConsumer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="One-Way" inputName="NotifyRequest" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NotificationProducerBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhincsubscription}NotificationProducerBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincSubscription.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincNotificationProducer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" outputName="SubscribeResponse" inputName="SubscribeRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="EntitySubscriptionManagerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entitysubscriptionmanagement}EntitySubscriptionManagerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/EntitySubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntitySubscriptionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Unsubscribe" name="Unsubscribe" bindingOperationName="Unsubscribe" type="Request-Response" outputName="UnsubscribeResponse" inputName="UnsubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="EntityNotificationProducerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entitysubscriptionmanagement}EntityNotificationProducerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/EntitySubscriptionManagement.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityNotificationProducer</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" outputName="SubscribeResponse" inputName="SubscribeRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:SubscribeCdcBioPackage" name="SubscribeCdcBioPackage" bindingOperationName="SubscribeCdcBioPackage" type="Request-Response" outputName="SubscribeCdcBioPackageResponse" inputName="SubscribeCdcBioPackageRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:SubscribeDocument" name="SubscribeDocument" bindingOperationName="SubscribeDocument" type="Request-Response" outputName="SubscribeDocumentResponse" inputName="SubscribeDocumentRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="PatientCorrelationBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation}PatientCorrelationBinding" soapVersion="1_1" anonymous="optional" definition="http://192.168.25.157:9080/PatientCorrelationService/PatientCorrelationService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/PatientCorrelationService</con:endpoint><con:endpoint>http://ATHC-GFAS:8080/PatientCorrelationService</con:endpoint><con:endpoint>http://172.16.50.82:9080/PatientCorrelationService</con:endpoint><con:endpoint>http://172.16.50.54:9080/PatientCorrelationService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="AddPatientCorrelation" name="AddPatientCorrelation" bindingOperationName="AddPatientCorrelation" type="Request-Response" outputName="AddPatientCorrelationResponse" inputName="AddPatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://ATHC-GFAS:8080/PatientCorrelationService</con:endpoint><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation/PatientCorrelationPortType/AddPatientCorrelationRequest"/></con:call></con:operation><con:operation isOneWay="false" action="RemovePatientCorrelation" name="RemovePatientCorrelation" bindingOperationName="RemovePatientCorrelation" type="Request-Response" outputName="RemovePatientCorrelationResponse" inputName="RemovePatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="RetrievePatientCorrelations" name="RetrievePatientCorrelations" bindingOperationName="RetrievePatientCorrelations" type="Request-Response" outputName="RetrievePatientCorrelationsResponse" inputName="RetrievePatientCorrelationsRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="PatientCorrelationBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation}PatientCorrelationBinding" soapVersion="1_1" anonymous="optional" definition="http://192.168.25.157:9080/PatientCorrelationService/PatientCorrelationService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/PatientCorrelationService</con:endpoint><con:endpoint>http://ATHC-GFAS:8080/PatientCorrelationService</con:endpoint><con:endpoint>http://172.16.50.82:9080/PatientCorrelationService</con:endpoint><con:endpoint>http://172.16.50.54:9080/PatientCorrelationService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="AddPatientCorrelation" name="AddPatientCorrelation" bindingOperationName="AddPatientCorrelation" type="Request-Response" outputName="AddPatientCorrelationResponse" inputName="AddPatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://ATHC-GFAS:8080/PatientCorrelationService</con:endpoint><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation/PatientCorrelationPortType/AddPatientCorrelationRequest"/></con:call></con:operation><con:operation isOneWay="false" action="RemovePatientCorrelation" name="RemovePatientCorrelation" bindingOperationName="RemovePatientCorrelation" type="Request-Response" outputName="RemovePatientCorrelationResponse" inputName="RemovePatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="RetrievePatientCorrelations" name="RetrievePatientCorrelations" bindingOperationName="RetrievePatientCorrelations" type="Request-Response" outputName="RetrievePatientCorrelationsResponse" inputName="RetrievePatientCorrelationsRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NhincComponentConnectionManagerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentconnectionmanager}NhincComponentConnectionManagerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincComponentConnectionManager.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${NhincHttpPort}/NhinConnect/NhincComponentConnectionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:ForceRefreshInternalConnectCache" name="ForceRefreshInternalConnectCache" bindingOperationName="ForceRefreshInternalConnectCache" type="Request-Response" outputName="ForceRefreshInternalConnectCacheResponse" inputName="ForceRefreshInternalConnectCacheRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:ForceRefreshUDDICache" name="ForceRefreshUDDICache" bindingOperationName="ForceRefreshUDDICache" type="Request-Response" outputName="ForceRefreshUDDICacheResponse" inputName="ForceRefreshUDDICacheRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllBusinessEntities" name="GetAllBusinessEntities" bindingOperationName="GetAllBusinessEntities" type="Request-Response" outputName="GetAllBusinessEntitiesResponse" inputName="GetAllBusinessEntitiesRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllBusinessEntitySetByServiceName" name="GetAllBusinessEntitySetByServiceName" bindingOperationName="GetAllBusinessEntitySetByServiceName" type="Request-Response" outputName="GetAllBusinessEntitySetByServiceNameResponse" inputName="GetAllBusinessEntitySetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllCommunities" name="GetAllCommunities" bindingOperationName="GetAllCommunities" type="Request-Response" outputName="GetAllCommunitiesResponse" inputName="GetAllCommunitiesRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllConnectionInfoEndpointSetByServiceName" name="GetAllConnectionInfoEndpointSetByServiceName" bindingOperationName="GetAllConnectionInfoEndpointSetByServiceName" type="Request-Response" outputName="GetAllConnectionInfoEndpointSetByServiceNameResponse" inputName="GetAllConnectionInfoEndpointSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllConnectionInfoSetByServiceName" name="GetAllConnectionInfoSetByServiceName" bindingOperationName="GetAllConnectionInfoSetByServiceName" type="Request-Response" outputName="GetAllConnectionInfoSetByServiceNameResponse" inputName="GetAllConnectionInfoSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAssigningAuthoritiesByHomeCommunity" name="GetAssigningAuthoritiesByHomeCommunity" bindingOperationName="GetAssigningAuthoritiesByHomeCommunity" type="Request-Response" outputName="GetAssigningAuthoritiesByHomeCommunityResponse" inputName="GetAssigningAuthoritiesByHomeCommunityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntity" name="GetBusinessEntity" bindingOperationName="GetBusinessEntity" type="Request-Response" outputName="GetBusinessEntityResponse" inputName="GetBusinessEntityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntityByServiceName" name="GetBusinessEntityByServiceName" bindingOperationName="GetBusinessEntityByServiceName" type="Request-Response" outputName="GetBusinessEntityByServiceNameResponse" inputName="GetBusinessEntityByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntitySet" name="GetBusinessEntitySet" bindingOperationName="GetBusinessEntitySet" type="Request-Response" outputName="GetBusinessEntitySetResponse" inputName="GetBusinessEntitySetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntitySetByServiceName" name="GetBusinessEntitySetByServiceName" bindingOperationName="GetBusinessEntitySetByServiceName" type="Request-Response" outputName="GetBusinessEntitySetByServiceNameResponse" inputName="GetBusinessEntitySetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoByServiceName" name="GetConnectionInfoByServiceName" bindingOperationName="GetConnectionInfoByServiceName" type="Request-Response" outputName="GetConnectionInfoByServiceNameResponse" inputName="GetConnectionInfoByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointByServiceName" name="GetConnectionInfoEndpointByServiceName" bindingOperationName="GetConnectionInfoEndpointByServiceName" type="Request-Response" outputName="GetConnectionInfoEndpointByServiceNameResponse" inputName="GetConnectionInfoEndpointByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointSet" name="GetConnectionInfoEndpointSet" bindingOperationName="GetConnectionInfoEndpointSet" type="Request-Response" outputName="GetConnectionInfoEndpointSetResponse" inputName="GetConnectionInfoEndpointSetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointSetByServiceName" name="GetConnectionInfoEndpointSetByServiceName" bindingOperationName="GetConnectionInfoEndpointSetByServiceName" type="Request-Response" outputName="GetConnectionInfoEndpointSetByServiceNameResponse" inputName="GetConnectionInfoEndpointSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="GetConnectionInfoEndpontFromNhinTarget" name="GetConnectionInfoEndpontFromNhinTarget" bindingOperationName="GetConnectionInfoEndpontFromNhinTarget" type="Request-Response" outputName="GetConnectionInfoEndpontFromNhinTargetResponse" inputName="GetConnectionInfoEndpontFromNhinTargetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoSet" name="GetConnectionInfoSet" bindingOperationName="GetConnectionInfoSet" type="Request-Response" outputName="GetConnectionInfoSetResponse" inputName="GetConnectionInfoSetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoSetByServiceName" name="GetConnectionInfoSetByServiceName" bindingOperationName="GetConnectionInfoSetByServiceName" type="Request-Response" outputName="GetConnectionInfoSetByServiceNameResponse" inputName="GetConnectionInfoSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetHomeCommunityByAssigningAuthority" name="GetHomeCommunityByAssigningAuthority" bindingOperationName="GetHomeCommunityByAssigningAuthority" type="Request-Response" outputName="GetHomeCommunityByAssigningAuthorityResponse" inputName="GetHomeCommunityByAssigningAuthorityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:StoreAssigningAuthorityToHomeCommunityMapping" name="StoreAssigningAuthorityToHomeCommunityMapping" bindingOperationName="StoreAssigningAuthorityToHomeCommunityMapping" type="Request-Response" outputName="StoreAssigningAuthorityToHomeCommunityMappingResponse" inputName="StoreAssigningAuthorityToHomeCommunityMappingRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:testSuite name="HIEM v2.1 (Agency Subscribe)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Basic Subscribe - Non-patient" searchProperties="true" id="722e8120-b649-400c-aa68-847492d83b80"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (entity)</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 2</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" entitize="false" useXQuery="false"><con:name>NotifyEndpoint</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.NotifyUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonentity';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';
//urn:SubscribeRequest[1]/wsnt:Subscribe[1]/wsnt:ConsumerReference[1]/wsa:Address[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Properties"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceAuditRepository","false",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","mocknotificationproducer","http://localhost:18080/nhincSubscriptionMock",context,log);
FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","policyengineservice","http://localhost:9080/NhinConnect/AdapterPolicyEngine",context,log);
</script></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EntityNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="urn:nhin">SomeTopic</wsnt:TopicExpression>
            </wsnt:Filter>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>3.3</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns11='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns10='http://www.w3.org/2005/08/addressing';
//ns11:SubscribeResponse[1]/ns11:SubscriptionReference[1]/ns10:Address[1]</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="SubscribeMock"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NotificationProducerBinding</con:interface><con:operation>Subscribe</con:operation><con:path>/nhincSubscriptionMock</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <b:SubscribeResponse>
         <b:SubscriptionReference>
            <add:Address>https://localhost:8181/SubscriptionManagerService/MockHiemUnsubscribe</add:Address>
            <add:ReferenceParameters>
               <SubscriptionId:SubscriptionId xmlns="http://www.hhs.gov/healthit/nhin" xmlns:SubscriptionId="http://www.hhs.gov/healthit/nhin">9999888877776666</SubscriptionId:SubscriptionId>
            </add:ReferenceParameters>
         </b:SubscriptionReference>
      </b:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:testStep type="request" name="get subscription count - 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Subscribe - with topic" searchProperties="true" id="c12a0511-b6d4-4d2f-be6e-4ba50fe77625" disabled="true"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (entity)</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 2</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" entitize="false" useXQuery="false"><con:name>NotifyEndpoint</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.NotifyUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonentity';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';
//urn:SubscribeRequest[1]/wsnt:Subscribe[1]/wsnt:ConsumerReference[1]/wsa:Address[1]</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Properties"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","3.3",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceAuditRepository","false",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"3.3","mocknotificationproducer","http://localhost:18080/nhincSubscriptionMock",context,log);
</script></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EntityNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
<!--
            <wsnt:Filter>
               <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple" xmlns:nhin="urn:nhin">nhinc:document</wsnt:TopicExpression>
            </wsnt:Filter>
-->
            <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:Slot name="$XDSDocumentEntryPatientId">
                  <rim:ValueList>
                     <rim:Value>222498764^^^&amp;2.16.840.1.113883.3.18.103&amp;ISO</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
               <rim:Slot name="$XDSDocumentEntryClassCode">
                  <rim:ValueList>
                     <rim:Value>('XNHIN-CONSENT')</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
            </rim:AdhocQuery>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>3.3</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns11='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns10='http://www.w3.org/2005/08/addressing';
//ns11:SubscribeResponse[1]/ns11:SubscriptionReference[1]/ns10:Address[1]</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="SubscribeMock"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NotificationProducerBinding</con:interface><con:operation>Subscribe</con:operation><con:path>/nhincSubscriptionMock</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <b:SubscribeResponse>
         <b:SubscriptionReference>
            <add:Address>https://localhost:8181/SubscriptionManagerService/MockHiemUnsubscribe</add:Address>
            <add:ReferenceParameters>
               <SubscriptionId:SubscriptionId xmlns="http://www.hhs.gov/healthit/nhin" xmlns:SubscriptionId="http://www.hhs.gov/healthit/nhin">9999888877776666</SubscriptionId:SubscriptionId>
            </add:ReferenceParameters>
         </b:SubscriptionReference>
      </b:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:testStep type="request" name="get subscription count - 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Subscribe - no topic" searchProperties="true" id="9b9d50cb-218e-4509-a5ca-d5aa9cd4162e"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>creationTime</con:name><con:value>20090715194155</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (entity)</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 3</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" entitize="false" useXQuery="false"><con:name>NotifyEndpoint</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.NotifyUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonentity';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';
//urn:SubscribeRequest[1]/wsnt:Subscribe[1]/wsnt:ConsumerReference[1]/wsa:Address[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>PatientCorrelation</con:name><con:sourceType>SUT.PatientCorrelation</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false"><con:name>AA to HCID 1 Mapping Endpoint</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Set AA to HCID 1 Mapping</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>AA to HCID 2 Mapping Endpoint</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Set AA to HCID 2 Mapping</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="groovy" name="get Date"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);
</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/Projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Multiple Remote</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (localSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" transferChildNodes="false" useXQuery="false"><con:name>CreationTime</con:name><con:sourceType>creationTime</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:creationTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID2</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID2</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/PatientCorrelationService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20090715194155"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="3.3"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="3.3" extension="IHS50002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="request" name="Set AA to HCID 1 Mapping"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="Set AA to HCID 1 Mapping"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>2.2</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Set AA to HCID 2 Mapping"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="Set AA to HCID 2 Mapping"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>3.3</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>3.3</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set Properties"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceAuditRepository","false",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","patientcorrelation","http://localhost:8080/PatientCorrelationService",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"2.2","notificationproducer","https://localhost:8181/NotificationProducerService/HiemSubscriptionTestHelper",context,log);
FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"3.3","notificationproducer","https://localhost:8181/NotificationProducerService/HiemSubscriptionTestHelper",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","mocknotificationproducer","http://localhost:18080/nhincSubscriptionMock",context,log);
</script></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EntityNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:Slot name="$XDSDocumentEntryPatientId">
                  <rim:ValueList>
                     <rim:Value>D123402^^^&amp;1.1&amp;ISO</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
               <rim:Slot name="$XDSDocumentEntryClassCode">
                  <rim:ValueList>
                     <rim:Value>('XNHIN-CONSENT')</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
            </rim:AdhocQuery>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <!--Optional:-->
<!--
         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>3.3</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
-->
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns11='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns10='http://www.w3.org/2005/08/addressing';
//ns11:SubscribeResponse[1]/ns11:SubscriptionReference[1]/ns10:Address[1]</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="SubscribeMock"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NotificationProducerBinding</con:interface><con:operation>Subscribe</con:operation><con:path>/nhincSubscriptionMock</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <b:SubscribeResponse>
         <b:SubscriptionReference>
            <add:Address>https://localhost:8181/SubscriptionManagerService/MockHiemUnsubscribe</add:Address>
            <add:ReferenceParameters>
               <SubscriptionId:SubscriptionId xmlns="http://www.hhs.gov/healthit/nhin" xmlns:SubscriptionId="http://www.hhs.gov/healthit/nhin">9999888877776666</SubscriptionId:SubscriptionId>
            </add:ReferenceParameters>
         </b:SubscriptionReference>
      </b:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:testStep type="request" name="get subscription count - 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 3"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Subscribe - Targeted w patient" searchProperties="true" id="2436a5b6-b27a-4de7-b566-31e32a868686"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://localhost:8080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://localhost:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://localhost:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionDte.EndpointUrl</con:name><con:value>http://localhost:8080/NhincComponentInternalSubscriptionDteService/SubscriptionDteService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.EndpointUrl</con:name><con:value>https://localhost:8181/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SUT.HIEM.ProxySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincComponentSubscriptionReferenceRepository</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryDirectory</con:name><con:value>\\localhost\glassfish\domains\domain1\config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepository.RepositoryFile</con:name><con:value>subscriptionList.xml</con:value></con:property><con:property><con:name>SUT.NhinProxy.SubjectDiscovery.endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.Entity.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/EntitySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.SubjectDiscovery.NhincProxy.Endpoint</con:name><con:value>http://localhost:9080/NhinConnect/NhincProxySubjectDiscovery</con:value></con:property><con:property><con:name>SUT.Mpi.MpiManager.Endpoint</con:name><con:value>http://localhost:8080/AdapterMpiManagerService</con:value></con:property><con:property><con:name>SUT.Mpi.Mpi.Endpoint</con:name><con:value>http://localhost:8080/NhinConnect/AdapterComponentMpiService</con:value></con:property><con:property><con:name>ConfigurationFilesSourceDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/IntegrationTest/GatewayConfigFiles</con:value></con:property><con:property><con:name>GatewayConfigurationDirectory</con:name><con:value>C:/projects/nhinc/Current/Product/Production/Common/Properties</con:value></con:property><con:property><con:name>GlassfishConfigurationDirectory</con:name><con:value>C:/GlassFishESB/glassfish/domains/domain1/config</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:name><con:value>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:value></con:property><con:property><con:name>SUT.HIEM.SubscriptionManager.EndpointUrl</con:name><con:value>https://localhost:8181/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>SUT.HIEM.NhinSubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.ProxyNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/NhincProxyNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntityNotify.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationConsumer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:value></con:property><con:property><con:name>SUT.HIEM.EntitySubscribe.NotifyUrl</con:name><con:value>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</con:value></con:property><con:property><con:name>SUT.HIEM.EntityUnsubscribe.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>RemoteGateway.HIEM.NotificationConsumer.EndpointUrl</con:name><con:value>http://localhost:8080/EntitySubscriptionManager/EntityUnsubscribeService</con:value></con:property><con:property><con:name>SUT.HIEM.NhinNotify.EndpointUrl</con:name><con:value>http://localhost:8181/NotificationConsumerService/HiemNotify</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="SelectedPatientData"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>LocalSubjectID</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalAssigningAuthorityID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAssigningAuthorityID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>creationTime</con:name><con:value>20090715194212</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set urls"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>subscribe (entity)</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath/></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ClearSubscriptionRepo</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>clear subscription repo</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-0</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 0</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>GetSubscriptionCount-1</con:name><con:sourceType>SUT.HIEM.SubscriptionRepositoryUtilService.EndpointUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>get subscription count - 2</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" entitize="false" useXQuery="false"><con:name>NotifyEndpoint</con:name><con:sourceType>SUT.HIEM.EntitySubscribe.NotifyUrl</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>subscribe</con:targetStep><con:targetPath>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonentity';
declare namespace wsnt='http://docs.oasis-open.org/wsn/b-2';
declare namespace wsa='http://www.w3.org/2005/08/addressing';
//urn:SubscribeRequest[1]/wsnt:Subscribe[1]/wsnt:ConsumerReference[1]/wsa:Address[1]</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>PatientCorrelation</con:name><con:sourceType>SUT.PatientCorrelation</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath/></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Clear Correlation Table"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);</script></con:config></con:testStep><con:testStep type="groovy" name="ClearLocalData"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script></con:config></con:testStep><con:testStep type="groovy" name="get Date"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);
</script></con:config></con:testStep><con:testStep type="datasource" name="Correlations"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>C:/Projects/NHINC/Current/Product/IntegrationTest/CorrelationTests.xls</file><worksheet>Multiple Remote</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty></con:configuration></con:dataSource><con:property>RemoteSubjectID</con:property><con:property>RemoteAssigningAuthorityID</con:property><con:property>LocalSubjectID</con:property><con:property>LocalAssigningAuthorityID</con:property><con:property>Select</con:property><con:startRow>1</con:startRow><con:endRow/><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>true</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="groovy" name="FindSelected"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (localSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script></con:config></con:testStep><con:testStep type="transfer" name="Spreadsheet->Add Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalSubjectID</con:name><con:sourceType>LocalSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>LocalAssigningAuthorityID</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>RemoteSubjectID</con:name><con:sourceType>RemoteSubjectID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" transferChildNodes="false" useXQuery="false"><con:name>CreationTime</con:name><con:sourceType>creationTime</con:sourceType><con:sourceStep>SelectedPatientData</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:creationTime[1]/@value</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>LocalAssigningAuthorityID2</con:name><con:sourceType>LocalAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RemoteAssigningAuthorityID2</con:name><con:sourceType>RemoteAssigningAuthorityID</con:sourceType><con:sourceStep>Correlations</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>Add</con:targetStep><con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath></con:transfers></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/PatientCorrelationService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20090715194212"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="3.3"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="3.3" extension="IHS50002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Correlations</dataSourceStep><targetStep>FindSelected</targetStep></con:config></con:testStep><con:testStep type="groovy" name="Set Properties"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def destConfigFileLocation = dataSource.getPropertyValue("GatewayConfigurationDirectory");

FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceSubscription","true",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","subscriptionPassthrough","false",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","localHomeCommunityId","1.1",context,log);
FileUtils.UpdateProperty(destConfigFileLocation,"gateway.properties","serviceAuditRepository","false",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","patientcorrelation","http://localhost:8080/PatientCorrelationService",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"2.2","notificationproducer","https://localhost:8181/NotificationProducerService/HiemSubscriptionTestHelper",context,log);
FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"3.3","notificationproducer","https://localhost:8181/NotificationProducerService/HiemSubscriptionTestHelper",context,log);

FileUtils.CreateOrUpdateConnection(destConfigFileLocation,"1.1","mocknotificationproducer","http://localhost:18080/nhincSubscriptionMock",context,log);
</script></con:config></con:testStep><con:testStep type="request" name="clear subscription repo"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>EmptySubscriptionRepository</con:operation><con:request name="clear subscription repo"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:EmptySubscriptionRepositoryRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="get subscription count - 0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="subscribe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EntityNotificationProducerBindingSoap11</con:interface><con:operation>Subscribe</con:operation><con:request name="subscribe"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/NhinConnect/EntityNotificationProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:SubscribeRequest>
         <wsnt:Subscribe>
            <wsnt:ConsumerReference>
               <wsa:Address>https://localhost:8181/NotificationConsumerService/HiemNotifyTestHelper</wsa:Address>
            </wsnt:ConsumerReference>
            <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:Slot name="$XDSDocumentEntryPatientId">
                  <rim:ValueList>
                     <rim:Value>D123402^^^&amp;1.1&amp;ISO</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
               <rim:Slot name="$XDSDocumentEntryClassCode">
                  <rim:ValueList>
                     <rim:Value>('XNHIN-CONSENT')</rim:Value>
                  </rim:ValueList>
               </rim:Slot>
            </rim:AdhocQuery>
         </wsnt:Subscribe>
         <urn:assertion xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
            <nccommon:address>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Orlando</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>FL</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:address>
            <nccommon:dateOfBirth>?string?</nccommon:dateOfBirth>
            <nccommon:dateOfSignature>10/25/2008 00:00:00</nccommon:dateOfSignature>
            <nccommon:expirationDate>12/25/2008 00:00:00</nccommon:expirationDate>
            <nccommon:explanationNonClaimantSignature>auth1234.doc</nccommon:explanationNonClaimantSignature>
            <nccommon:haveSecondWitnessSignature>false</nccommon:haveSecondWitnessSignature>
            <nccommon:haveSignature>true</nccommon:haveSignature>
            <nccommon:haveWitnessSignature>true</nccommon:haveWitnessSignature>
            <nccommon:homeCommunity>
               <nccommon:description>?string?</nccommon:description>
               <nccommon:homeCommunityId>?string?</nccommon:homeCommunityId>
               <nccommon:name>Melbourne Medical Group</nccommon:name>
            </nccommon:homeCommunity>
            <nccommon:personName>
               <nccommon:familyName>Jones</nccommon:familyName>
               <nccommon:givenName>Bertha</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>BAJ</nccommon:secondNameOrInitials>
            </nccommon:personName>
            <nccommon:phoneNumber>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:phoneNumber>
            <nccommon:purposeOfDisclosure>treatment</nccommon:purposeOfDisclosure>
            <nccommon:secondWitnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>?string?</nccommon:city>
               <nccommon:country>?string?</nccommon:country>
               <nccommon:state>?string?</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:secondWitnessAddress>
            <nccommon:secondWitnessName>
               <nccommon:familyName>?string?</nccommon:familyName>
               <nccommon:givenName>?string?</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>?string?</nccommon:secondNameOrInitials>
            </nccommon:secondWitnessName>
            <nccommon:secondWitnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:secondWitnessPhone>
            <nccommon:SSN>?string?</nccommon:SSN>
            <!--1 or more repetitions:-->
            <nccommon:uniquePatientId>5678</nccommon:uniquePatientId>
            <nccommon:witnessAddress>
               <nccommon:addressType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:addressType>
               <nccommon:city>Atlanta</nccommon:city>
               <nccommon:country>USA</nccommon:country>
               <nccommon:state>GA</nccommon:state>
               <nccommon:streetAddress>?string?</nccommon:streetAddress>
               <nccommon:zipCode>?string?</nccommon:zipCode>
            </nccommon:witnessAddress>
            <nccommon:witnessName>
               <nccommon:familyName>Smythe</nccommon:familyName>
               <nccommon:givenName>Catherine</nccommon:givenName>
               <nccommon:nameType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:nameType>
               <nccommon:secondNameOrInitials>CS</nccommon:secondNameOrInitials>
            </nccommon:witnessName>
            <nccommon:witnessPhone>
               <nccommon:areaCode>?string?</nccommon:areaCode>
               <nccommon:countryCode>?string?</nccommon:countryCode>
               <nccommon:extension>?string?</nccommon:extension>
               <nccommon:localNumber>?string?</nccommon:localNumber>
               <nccommon:phoneNumberType>
                  <nccommon:code>?string?</nccommon:code>
                  <nccommon:codeSystem>?string?</nccommon:codeSystem>
                  <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>?string?</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:phoneNumberType>
            </nccommon:witnessPhone>
            <nccommon:userInfo>
               <nccommon:personName>
                  <nccommon:familyName>Smith</nccommon:familyName>
                  <nccommon:givenName>Betty</nccommon:givenName>
                  <nccommon:nameType>
                     <nccommon:code>?string?</nccommon:code>
                     <nccommon:codeSystem>?string?</nccommon:codeSystem>
                     <nccommon:codeSystemName>?string?</nccommon:codeSystemName>
                     <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                     <nccommon:displayName>?string?</nccommon:displayName>
                     <nccommon:originalText>?string?</nccommon:originalText>
                  </nccommon:nameType>
                  <nccommon:secondNameOrInitials>Lou</nccommon:secondNameOrInitials>
               </nccommon:personName>
               <nccommon:userName>user1</nccommon:userName>
               <nccommon:role>nurse</nccommon:role>
               <nccommon:org>
                  <nccommon:description>hospital</nccommon:description>
                  <nccommon:homeCommunityId>2.16.840.1.113883.3.166.4</nccommon:homeCommunityId>
                  <nccommon:name>Holmes</nccommon:name>
               </nccommon:org>
               <!--Optional:-->
               <nccommon:roleCoded>
                  <nccommon:code>80584001</nccommon:code>
                  <nccommon:codeSystem>2.16.840.1.113883.6.96</nccommon:codeSystem>
                  <nccommon:codeSystemName>SNOMED_CT</nccommon:codeSystemName>
                  <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
                  <nccommon:displayName>Psychiatrist</nccommon:displayName>
                  <nccommon:originalText>?string?</nccommon:originalText>
               </nccommon:roleCoded>
            </nccommon:userInfo>
            <nccommon:authorized>true</nccommon:authorized>
            <!--Optional:-->
            <nccommon:purposeOfDisclosureCoded>
               <nccommon:code>PSYCHOTHERAPY</nccommon:code>
               <nccommon:codeSystem>2.16.840.1.113883.3.18.7.1</nccommon:codeSystem>
               <nccommon:codeSystemName>nhin-purpose</nccommon:codeSystemName>
               <nccommon:codeSystemVersion>?string?</nccommon:codeSystemVersion>
               <nccommon:displayName>Use or disclosure of Psychotherapy Notes</nccommon:displayName>
               <nccommon:originalText>?string?</nccommon:originalText>
            </nccommon:purposeOfDisclosureCoded>
            <!--Optional:-->
            <nccommon:claimFormRef>Ref-Clm-123</nccommon:claimFormRef>
            <!--Optional:-->
            <nccommon:claimFormRaw>YWVvbGlhbQ==</nccommon:claimFormRaw>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>?</urn1:description>
                  <urn1:homeCommunityId>3.3</urn1:homeCommunityId>
                  <urn1:name>?</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
      </urn:SubscribeRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="Schema Compliance"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns11='http://docs.oasis-open.org/wsn/b-2';
declare namespace ns10='http://www.w3.org/2005/08/addressing';
//ns11:SubscribeResponse[1]/ns11:SubscriptionReference[1]/ns10:Address[1]</path><content>${Properties#SUT.HIEM.SubscriptionManager.EndpointUrl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="mockresponse" name="SubscribeMock"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="subscribe" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NotificationProducerBinding</con:interface><con:operation>Subscribe</con:operation><con:path>/nhincSubscriptionMock</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b="http://docs.oasis-open.org/wsn/b-2" xmlns:add="http://www.w3.org/2005/08/addressing">
   <soapenv:Header/>
   <soapenv:Body>
      <b:SubscribeResponse>
         <b:SubscriptionReference>
            <add:Address>https://localhost:8181/SubscriptionManagerService/MockHiemUnsubscribe</add:Address>
            <add:ReferenceParameters>
               <SubscriptionId:SubscriptionId xmlns="http://www.hhs.gov/healthit/nhin" xmlns:SubscriptionId="http://www.hhs.gov/healthit/nhin">9999888877776666</SubscriptionId:SubscriptionId>
            </add:ReferenceParameters>
         </b:SubscriptionReference>
      </b:SubscribeResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response></con:config></con:testStep><con:testStep type="request" name="get subscription count - 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>HiemSubscriptionRepositoryUtilPortTypeBinding</con:interface><con:operation>GetSubscriptionCount</con:operation><con:request name="get subscription count - 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/HiemSubscriptionRepositoryUtilService/HiemSubscriptionRepositoryUtilService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:hiemsubscriptionrepositoryutil">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:GetSubscriptionCountRequest/>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Fault Assertion"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns1='urn:gov:hhs:fha:nhinc:gateway:hiemsubscriptionrepositoryutil';
//ns1:GetSubscriptionCountResponse/ns1:SubscriptionCount</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>