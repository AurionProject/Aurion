<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="FTANotificationTest" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="EntityNotificationConsumerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entitynotificationconsumer}EntityNotificationConsumerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/EntityNotificationConsumer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityNotificationConsumer</con:endpoint><con:endpoint>http://localhost:8088/mockEntityNotificationConsumerBindingSoap11</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:Notify" name="Notify" bindingOperationName="Notify" type="Request-Response" outputName="NotifyResponse" inputName="NotifyRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfCdcBioPackage" name="NotifySubscribersOfCdcBioPackage" bindingOperationName="NotifySubscribersOfCdcBioPackage" type="Request-Response" outputName="NotifySubscribersOfCdcBioPackageResponse" inputName="NotifySubscribersOfCdcBioPackageRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:NotifySubscribersOfDocument" name="NotifySubscribersOfDocument" bindingOperationName="NotifySubscribersOfDocument" type="Request-Response" outputName="NotifySubscribersOfDocumentResponse" inputName="NotifySubscribersOfDocumentRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation></con:interface><con:testSuite name="EntityNotificationConsumer"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="FTA Notification" searchProperties="true" id="77b7c6c3-aaef-48f3-b453-e9a2cbc7ab41"><con:settings/><con:testStep type="properties" name="Test Case Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>dumpDir</con:name><con:value>//192.168.25.157/c$/cdc/fileDump</con:value></con:property><con:property><con:name>exportDir1</con:name><con:value>//192.168.25.157/c$/cdc/fileExport</con:value></con:property><con:property><con:name>exportDir2</con:name><con:value>//192.168.25.157/c$/cdc/fileExport2</con:value></con:property><con:property><con:name>copyFile</con:name><con:value>//192.168.25.157/c$/cdc/A04.txt</con:value></con:property><con:property><con:name>topic</con:name><con:value>nhinc:testTopic</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Copy file into File Transfer dir"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def propertyList = testRunner.testCase.getTestStepByName( "Test Case Properties" );
def dumpDir = propertyList.getPropertyValue( "dumpDir" );
def copyFile = propertyList.getPropertyValue( "copyFile" );
def fileInDumpDir = dumpDir + "/file.txt";

log.info copyFile;
File myFile = new File(copyFile);
if(myFile.exists())
{
    log.info copyFile;
    new File(fileInDumpDir).withWriter 
    { 
        file -> new File(copyFile).eachLine 
        { 
            line -> file.writeLine(line)  
        }
    }
}
</script></con:config></con:testStep><con:testStep type="mockresponse" name="Notify Mock Response"><con:settings/><con:config xsi:type="con:MockResponseStep" startStep="Copy file into File Transfer dir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>EntityNotificationConsumerBindingSoap11</con:interface><con:operation>Notify</con:operation><con:path>/mockEntityNotificationConsumerBindingSoap11</con:path><con:port>18080</con:port><con:timeout>5000</con:timeout><con:response><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockResponse@response-delay">35000</con:setting></con:settings><con:responseContent><![CDATA[<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns5:Acknowledgement xmlns:ns2="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns3="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns4="http://docs.oasis-open.org/wsn/t-1" xmlns:ns5="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns6="urn:oasis:names:tc:xacml:2.0:context:schema:os" xmlns:ns7="urn:oasis:names:tc:xacml:2.0:policy:schema:os" xmlns:ns8="http://www.w3.org/2005/08/addressing" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns10="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns11="urn:ihe:iti:xds-b:2007" xmlns:ns12="http://docs.oasis-open.org/wsn/b-2" xmlns:ns13="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns14="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="http://nhinc.services.com/schema/auditmessage" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns19="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <ns5:message>Received by Mock test</ns5:message>
      </ns5:Acknowledgement>
   </S:Body>
</S:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:response><con:assertion type="XPath Match"><con:configuration><path>declare namespace urn='urn:gov:hhs:fha:nhinc:common:nhinccommonentity';
declare namespace b='http://docs.oasis-open.org/wsn/b-2';
//urn:NotifyRequest[1]/b:Notify[1]/b:NotificationMessage[1]/b:Topic[1]</path><content>${Test Case Properties#topic}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="18080" path="/mockEntityNotificationConsumerBindingSoap11" name="EntityNotificationConsumerBindingSoap11 MockService" host="Tiller-PC" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="Notify" interface="EntityNotificationConsumerBindingSoap11" operation="Notify"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns5:Acknowledgement xmlns:ns2="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns3="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns4="http://docs.oasis-open.org/wsn/t-1" xmlns:ns5="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns6="urn:oasis:names:tc:xacml:2.0:context:schema:os" xmlns:ns7="urn:oasis:names:tc:xacml:2.0:policy:schema:os" xmlns:ns8="http://www.w3.org/2005/08/addressing" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns10="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns11="urn:ihe:iti:xds-b:2007" xmlns:ns12="http://docs.oasis-open.org/wsn/b-2" xmlns:ns13="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns14="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="http://nhinc.services.com/schema/auditmessage" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns19="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter">
         <ns5:message>Received by Mock test</ns5:message>
      </ns5:Acknowledgement>
   </S:Body>
</S:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:entitynotificationconsumer/EntityNotificationConsumerPortType/NotifyResponse"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>