<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="PatientCorrelationFacade-jr" resourceRoot="" soapui-version="4.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="PatientCorrelationFacadeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade}PatientCorrelationFacadeBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincComponentPatientCorrelationFacade.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://JRay630V.atdom-hc.com:8080/PatientCorrelationService/PatientCorrelationFacadeService</con:endpoint><con:endpoint>http://JRay630V.atdom-hc.com:9080/PatientCorrelationFacadeService</con:endpoint><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="AddPatientCorrelation" name="AddPatientCorrelation" bindingOperationName="AddPatientCorrelation" type="Request-Response" outputName="AddPatientCorrelationResponse" inputName="AddPatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/AddPatientCorrelationRequest"/></con:call><con:call name="Neil's add 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://JRay630V.atdom-hc.com:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>1234</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>XYZ</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/AddPatientCorrelationRequest"/></con:call><con:call name="Neil's add 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://JRay630V.atdom-hc.com:8080/PatientCorrelationService/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>1234</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>ABC</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.3</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/AddPatientCorrelationRequest"/></con:call></con:operation><con:operation isOneWay="false" action="RemovePatientCorrelation" name="RemovePatientCorrelation" bindingOperationName="RemovePatientCorrelation" type="Request-Response" outputName="RemovePatientCorrelationResponse" inputName="RemovePatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="rem"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RemovePatientCorrelationRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RemovePatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/RemovePatientCorrelationRequest"/></con:call></con:operation><con:operation isOneWay="false" action="RetrievePatientCorrelations" name="RetrievePatientCorrelations" bindingOperationName="RetrievePatientCorrelations" type="Request-Response" outputName="RetrievePatientCorrelationsResponse" inputName="RetrievePatientCorrelationsRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://JRay630V.atdom-hc.com:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <!--Zero or more repetitions:-->
         <urn:ExcludeAssiginingAuthority>?</urn:ExcludeAssiginingAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetAssigningAuthority>?</urn:TargetAssiginingAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetHomeCommunity>?</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/RetrievePatientCorrelationsRequest"/></con:call><con:call name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <!--Zero or more repetitions:-->
         <urn:ExcludeAssiginingAuthority>?</urn:ExcludeAssiginingAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetAssiginingAuthority>?</urn:TargetAssiginingAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetHomeCommunity>?</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/RetrievePatientCorrelationsRequest"/></con:call><con:call name="Request 3"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://JRay630V.atdom-hc.com:8080/PatientCorrelationService/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>?</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>?</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <!--Zero or more repetitions:-->
         <urn:ExcludeAssigningAuthority>?</urn:ExcludeAssigningAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetAssigningAuthority>?</urn:TargetAssigningAuthority>
         <!--Zero or more repetitions:-->
         <urn:TargetHomeCommunity>?</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/RetrievePatientCorrelationsRequest"/></con:call><con:call name="Neil's message"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://JRay630V.atdom-hc.com:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>1234</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetHomeCommunity>1.2.3.4.55.500</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade/PatientCorrelationFacadePortType/RetrievePatientCorrelationsRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="PatientCorrelationBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation}PatientCorrelationBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincComponentPatientCorrelation.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://127.0.0.01:9080/PatientCorrelationService</con:endpoint><con:endpoint>http://dvanhie3.fedsconnect.org:9080/PatientCorrelationService</con:endpoint><con:endpoint>http://192.168.25.157:9080/PatientCorrelationService</con:endpoint></con:endpoints><con:operation isOneWay="false" action="AddPatientCorrelation" name="AddPatientCorrelation" bindingOperationName="AddPatientCorrelation" type="Request-Response" outputName="AddPatientCorrelationResponse" inputName="AddPatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="RemovePatientCorrelation" name="RemovePatientCorrelation" bindingOperationName="RemovePatientCorrelation" type="Request-Response" outputName="RemovePatientCorrelationResponse" inputName="RemovePatientCorrelationRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="RetrievePatientCorrelations" name="RetrievePatientCorrelations" bindingOperationName="RetrievePatientCorrelations" type="Request-Response" outputName="RetrievePatientCorrelationsResponse" inputName="RetrievePatientCorrelationsRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body>
      <ns1:RetrievePatientCorrelationsRequest xsi:schemaLocation="urn:hl7-org:v3 C:\Projects\NHINC\Current\Product\Production\Common\Interfaces\src\schemas\nhinc\common\PatientCorrelation.xsd" xmlns:ns1="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
         <ns1:PRPA_IN201309UV ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:msgns="urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacadedte" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:ns4="http://schemas.xmlsoap.org/ws/2004/08/addressing">
            <id extension="-46923fc8:11fb945256c:-7fe5" root="1.1"/>
            <creationTime value="20090258025043"/>
            <interactionId extension="PRPA_IN201309" root="2.16.840.1.113883.1.6"/>
            <processingCode code="P"/>
            <processingModeCode code="T"/>
            <acceptAckCode code="AL"/>
            <receiver typeCode="RCV">
               <device determinerCode="INSTANCE">
                  <id nullFlavor="NA"/>
               </device>
            </receiver>
            <sender typeCode="SND">
               <device determinerCode="INSTANCE">
                  <id root="1.1"/>
               </device>
            </sender>
            <controlActProcess moodCode="EVN">
               <code code="PRPA_TE201309UV" codeSystem="2.16.840.1.113883.1.6"/>
               <authorOrPerformer typeCode="AUT">
                  <assignedPerson>
                     <id nullFlavor="NA"/>
                  </assignedPerson>
               </authorOrPerformer>
               <queryByParameter>
                  <queryId extension="-46923fc8:11fb945256c:-7fe4" root="1.1"/>
                  <statusCode code="new"/>
                  <responsePriorityCode code="I"/>
                  <parameterList>
                     <patientIdentifier>
                        <value extension="MRN-1" root="1.1"/>
                        <semanticsText/>
                     </patientIdentifier>
                  </parameterList>
               </queryByParameter>
            </controlActProcess>
         </ns1:PRPA_IN201309UV>
      </ns1:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation/PatientCorrelationPortType/RetrievePatientCorrelationsRequest"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="NhincComponentConnectionManagerBindingSoap11" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentconnectionmanager}NhincComponentConnectionManagerBindingSoap11" soapVersion="1_1" anonymous="optional" definition="file:/C:/Projects/NHINC/Current/Product/Production/Common/Interfaces/src/wsdl/NhincComponentConnectionManager.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:endpoints><con:endpoint>http://localhost:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint></con:endpoints><con:operation isOneWay="false" action="urn:ForceRefreshInternalConnectCache" name="ForceRefreshInternalConnectCache" bindingOperationName="ForceRefreshInternalConnectCache" type="Request-Response" outputName="ForceRefreshInternalConnectCacheResponse" inputName="ForceRefreshInternalConnectCacheRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:ForceRefreshUDDICache" name="ForceRefreshUDDICache" bindingOperationName="ForceRefreshUDDICache" type="Request-Response" outputName="ForceRefreshUDDICacheResponse" inputName="ForceRefreshUDDICacheRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllBusinessEntities" name="GetAllBusinessEntities" bindingOperationName="GetAllBusinessEntities" type="Request-Response" outputName="GetAllBusinessEntitiesResponse" inputName="GetAllBusinessEntitiesRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllBusinessEntitySetByServiceName" name="GetAllBusinessEntitySetByServiceName" bindingOperationName="GetAllBusinessEntitySetByServiceName" type="Request-Response" outputName="GetAllBusinessEntitySetByServiceNameResponse" inputName="GetAllBusinessEntitySetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllCommunities" name="GetAllCommunities" bindingOperationName="GetAllCommunities" type="Request-Response" outputName="GetAllCommunitiesResponse" inputName="GetAllCommunitiesRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllConnectionInfoEndpointSetByServiceName" name="GetAllConnectionInfoEndpointSetByServiceName" bindingOperationName="GetAllConnectionInfoEndpointSetByServiceName" type="Request-Response" outputName="GetAllConnectionInfoEndpointSetByServiceNameResponse" inputName="GetAllConnectionInfoEndpointSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAllConnectionInfoSetByServiceName" name="GetAllConnectionInfoSetByServiceName" bindingOperationName="GetAllConnectionInfoSetByServiceName" type="Request-Response" outputName="GetAllConnectionInfoSetByServiceNameResponse" inputName="GetAllConnectionInfoSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetAssigningAuthoritiesByHomeCommunity" name="GetAssigningAuthoritiesByHomeCommunity" bindingOperationName="GetAssigningAuthoritiesByHomeCommunity" type="Request-Response" outputName="GetAssigningAuthoritiesByHomeCommunityResponse" inputName="GetAssigningAuthoritiesByHomeCommunityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntity" name="GetBusinessEntity" bindingOperationName="GetBusinessEntity" type="Request-Response" outputName="GetBusinessEntityResponse" inputName="GetBusinessEntityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntityByServiceName" name="GetBusinessEntityByServiceName" bindingOperationName="GetBusinessEntityByServiceName" type="Request-Response" outputName="GetBusinessEntityByServiceNameResponse" inputName="GetBusinessEntityByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntitySet" name="GetBusinessEntitySet" bindingOperationName="GetBusinessEntitySet" type="Request-Response" outputName="GetBusinessEntitySetResponse" inputName="GetBusinessEntitySetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetBusinessEntitySetByServiceName" name="GetBusinessEntitySetByServiceName" bindingOperationName="GetBusinessEntitySetByServiceName" type="Request-Response" outputName="GetBusinessEntitySetByServiceNameResponse" inputName="GetBusinessEntitySetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoByServiceName" name="GetConnectionInfoByServiceName" bindingOperationName="GetConnectionInfoByServiceName" type="Request-Response" outputName="GetConnectionInfoByServiceNameResponse" inputName="GetConnectionInfoByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointByServiceName" name="GetConnectionInfoEndpointByServiceName" bindingOperationName="GetConnectionInfoEndpointByServiceName" type="Request-Response" outputName="GetConnectionInfoEndpointByServiceNameResponse" inputName="GetConnectionInfoEndpointByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointSet" name="GetConnectionInfoEndpointSet" bindingOperationName="GetConnectionInfoEndpointSet" type="Request-Response" outputName="GetConnectionInfoEndpointSetResponse" inputName="GetConnectionInfoEndpointSetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoEndpointSetByServiceName" name="GetConnectionInfoEndpointSetByServiceName" bindingOperationName="GetConnectionInfoEndpointSetByServiceName" type="Request-Response" outputName="GetConnectionInfoEndpointSetByServiceNameResponse" inputName="GetConnectionInfoEndpointSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoSet" name="GetConnectionInfoSet" bindingOperationName="GetConnectionInfoSet" type="Request-Response" outputName="GetConnectionInfoSetResponse" inputName="GetConnectionInfoSetRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetConnectionInfoSetByServiceName" name="GetConnectionInfoSetByServiceName" bindingOperationName="GetConnectionInfoSetByServiceName" type="Request-Response" outputName="GetConnectionInfoSetByServiceNameResponse" inputName="GetConnectionInfoSetByServiceNameRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:GetHomeCommunityByAssigningAuthority" name="GetHomeCommunityByAssigningAuthority" bindingOperationName="GetHomeCommunityByAssigningAuthority" type="Request-Response" outputName="GetHomeCommunityByAssigningAuthorityResponse" inputName="GetHomeCommunityByAssigningAuthorityRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation isOneWay="false" action="urn:StoreAssigningAuthorityToHomeCommunityMapping" name="StoreAssigningAuthorityToHomeCommunityMapping" bindingOperationName="StoreAssigningAuthorityToHomeCommunityMapping" type="Request-Response" outputName="StoreAssigningAuthorityToHomeCommunityMappingResponse" inputName="StoreAssigningAuthorityToHomeCommunityMappingRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>?</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>?</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentconnectionmanager/NhincComponentConnectionManagerPortType/StoreAssigningAuthorityToHomeCommunityMappingRequest"/></con:call></con:operation></con:interface><con:testSuite name="PatientCorrelationTestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Simple Add-Retrieve" searchProperties="true" id="6f15be02-a4d3-48ad-8886-c53573b27c9a"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>SUT.PolicyEngine.PolicyEngineFacadeDte.EndpointUrl</con:name><con:value>http://192.168.25.157:8080/NhincComponentInternalPolicyEngineTransformService/PolicyEngineTransformationService</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve 2 endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve by secondary id</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Simple NotContains" disabled="true"><con:configuration><token>MRN-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve by secondary id"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve by secondary id"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-x</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='1.1']/ncc:SubjectIdentifier</path><content>MRN-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add Multiple-Retrieve" searchProperties="true" id="91486bf2-fc39-46fa-8a3a-8c042d16e800"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false"><con:name>add 2 endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add another</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add another"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add another"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-Y</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>3.3</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Simple NotContains" disabled="true"><con:configuration><token>MRN-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier for second correlation"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='3.3']/ncc:SubjectIdentifier</path><content>MRN-Y</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Don't return input on retrieve" searchProperties="true" id="5421aa86-a7b8-472d-8a4c-ca1c1ad526d3"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Simple NotContains"><con:configuration><token>MRN-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Don't create duplicate entries (same input)" searchProperties="true" id="a74d2f61-ce4b-4fef-adb8-a9b0a78a4bba"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>add 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add again</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false"><con:name>ret 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve again</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>DBFunctions.clearTable("localhost", "3306", "patientcorrelationdb", "root", "NHIE-Gateway", "correlatedidentifiers");

 
</script></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - expect single entry"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace SOAP-ENV='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:RetrievePatientCorrelationsResponse/count(ns3:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add again"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add again"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve again"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve again"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - expect single entry"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace SOAP-ENV='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:RetrievePatientCorrelationsResponse/count(ns3:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Don't create duplicate entries (reversed input)" searchProperties="true" id="b8dd5669-7146-477f-b391-0e05b3ac8337"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>add 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add again</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ret 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve again</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - expect single entry"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace SOAP-ENV='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:RetrievePatientCorrelationsResponse/count(ns3:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add again"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add again"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve again"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve again"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match - expect single entry"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ns2='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace SOAP-ENV='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace ns1='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:RetrievePatientCorrelationsResponse/count(ns3:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add-Retrieve by secondary ID" searchProperties="true" id="f628c14c-f723-42ad-96a9-ba5c91aa12b5"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>ret 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve by secondary id</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='2.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Simple NotContains" disabled="true"><con:configuration><token>MRN-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve by secondary id"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve by secondary id"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-x</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='1.1']/ncc:SubjectIdentifier</path><content>MRN-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add multiple patients-Retrieve" searchProperties="true" id="5c17ede2-d4f0-4319-af94-6c446ee033fc"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add patient "A"</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve patient "MRN-1"</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>add 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add patient "MRN-1"</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 3</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add another correlation for patient "MRN-1"</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add patient &quot;A&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add patient &quot;A&quot;"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add patient &quot;MRN-1&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add patient &quot;MRN-1&quot;"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-X</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add another correlation for patient &quot;MRN-1&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add another correlation for patient &quot;MRN-1&quot;"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-Y</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.3</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve patient &quot;MRN-1&quot;"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve patient &quot;MRN-1&quot;"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match" name="XPath Match - Contains proper identifier"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='1.2']/ncc:SubjectIdentifier</path><content>MRN-X</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:assertion type="Simple NotContains" disabled="true"><con:configuration><token>MRN-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match"><con:configuration><path>declare namespace ns4='http://schemas.xmlsoap.org/ws/2004/08/addressing';
declare namespace msgns='urn:gov:hhs:fha:nhinc:componentpatientcorrelationfacade';
declare namespace ncc='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace ns3='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';
declare namespace ns11='urn:hl7-org:v3';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/pcf:QualifiedPatientIdentifier[ncc:AssigningAuthorityIdentifier='1.3']/ncc:SubjectIdentifier</path><content>MRN-Y</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Filter by Assigning Authority" searchProperties="true" id="1b088ec2-c74d-4053-bf63-7eff856243ad"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A2, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 3</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A, 3.3)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>add 4</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat B, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve (filter by assigning authority 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 5</con:name><con:sourceType>SUT.PatientCorrelation</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A, 4.4)</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A2, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A2, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-3.3-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>3.3</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 4.4)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 4.4)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-4.4-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>4.4</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat B, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat B, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>2.2</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>3.3</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 2.2 + 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 2.2 + 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetAssigningAuthority>2.2</urn:TargetAssigningAuthority>
         <urn:TargetAssigningAuthority>3.3</urn:TargetAssigningAuthority>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Filter by Home Community" searchProperties="true" id="c6761e14-a855-431f-98ba-73faa85265b2"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:source>C:/Projects/NHINC/Current/Product/IntegrationTest/default.properties</con:source><con:properties><con:property><con:name>SUT.PatientCorrelationFacade</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:value></con:property><con:property><con:name>SUT.PatientCorrelationHost</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>SUT.PatientCorrelationUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.PatientCorrelationPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>SUT.EntityEndpoint</con:name><con:value>http://192.168.25.157:9080/EntityServiceService/EntityServicePort</con:value></con:property><con:property><con:name>SUT.RemoteMPI</con:name><con:value>//dvanhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.LocalMPI</con:name><con:value>//mhsnhie2.fedsconnect.org/glassfish/domains/domain1/config/mpi.xml</con:value></con:property><con:property><con:name>SUT.EntityDocQueryEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocQuery</con:value></con:property><con:property><con:name>SUT.EntityDocRetrieveEndpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/EntityDocRetrieve</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable.Host</con:name><con:value>localhost</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.PatientCorrelation</con:name><con:value>http://192.168.25.157:9080/PatientCorrelationService</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMappingTable.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Table</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Host</con:name><con:value>192.168.25.157</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Port</con:name><con:value>3306</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.DB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.User</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>SUT.AssigningAuthorityMapping.DB.Pass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>SUT.ConnectionManager.endpoint</con:name><con:value>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="set endpoints"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add request endpoint</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A2, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>add 3</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat A, 3.3)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>add 4</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Add (pat B, 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>retrieve 2</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve (filter by assigning authority 2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve 3</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve (filter by assigning authority 3.3)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>retrieve 4</con:name><con:sourceType>SUT.PatientCorrelationFacade</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>Retrieve (filter by assigning authority 2.2 + 3.3)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>create AA 1</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>create AA mapping (1.1)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>create AA 2</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>create AA mapping (2.2)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>create AA 3</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>create AA mapping (3.3)</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>create AA 4</con:name><con:sourceType>SUT.ConnectionManager.endpoint</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>Endpoint</con:targetType><con:targetStep>create AA mapping (4.4)</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="clear assigning authority mappings"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.Host" );
def port = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.Port" );
def db = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.DB" );
def user = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.User" );
def pass = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.Pass" );
def table = dataSource.getPropertyValue( "SUT.AssigningAuthorityMapping.DB.Table" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="create AA mapping (1.1)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="create AA mapping (1.1)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>1.1</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>1.123.1</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="create AA mapping (2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="create AA mapping (2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>2.2</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>2.123.2</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="create AA mapping (3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="create AA mapping (3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>3.3</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>3.123.3</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="create AA mapping (4.4)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NhincComponentConnectionManagerBindingSoap11</con:interface><con:operation>StoreAssigningAuthorityToHomeCommunityMapping</con:operation><con:request name="create AA mapping (4.4)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/NhinConnect/NhincComponentConnectionManager</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:connectionmanagerinfo" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:StoreAssigningAuthorityToHomeCommunityRequest>
         <urn:AssigningAuthority>
            <urn1:assigningAuthorityId>4.4</urn1:assigningAuthorityId>
         </urn:AssigningAuthority>
         <urn:HomeCommunity>
            <urn1:description>?</urn1:description>
            <urn1:homeCommunityId>4.123.4</urn1:homeCommunityId>
            <urn1:name>?</urn1:name>
         </urn:HomeCommunity>
      </urn:StoreAssigningAuthorityToHomeCommunityRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="clear repository"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Properties" );
def host = dataSource.getPropertyValue( "SUT.PatientCorrelationHost" );
def port = dataSource.getPropertyValue( "SUT.PatientCorrelationPort" );
def db = dataSource.getPropertyValue( "SUT.PatientCorrelationDB" );
def user = dataSource.getPropertyValue( "SUT.PatientCorrelationUser" );
def pass = dataSource.getPropertyValue( "SUT.PatientCorrelationPass" );
def table = dataSource.getPropertyValue( "SUT.PatientCorrelationTable" );

DBFunctions.clearTable(host, port, db, user, pass, table);
</script></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A2, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A2, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-3.3-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>3.3</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat A, 4.4)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat A, 4.4)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-4.4-A</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>4.4</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Add (pat B, 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>AddPatientCorrelation</con:operation><con:request name="Add (pat B, 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:AddPatientCorrelationRequest>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-1.1-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
            <urn:QualifiedPatientIdentifier>
               <urn1:SubjectIdentifier>MRN-2.2-B</urn1:SubjectIdentifier>
               <urn1:AssigningAuthorityIdentifier>2.2</urn1:AssigningAuthorityIdentifier>
            </urn:QualifiedPatientIdentifier>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 2.2)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 2.2)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetHomeCommunity>2.123.2</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetHomeCommunity>3.123.3</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:testStep type="request" name="Retrieve (filter by assigning authority 2.2 + 3.3)"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PatientCorrelationFacadeBinding</con:interface><con:operation>RetrievePatientCorrelations</con:operation><con:request name="Retrieve (filter by assigning authority 2.2 + 3.3)"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://192.168.25.157:9080/PatientCorrelationFacadeService</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:RetrievePatientCorrelationsRequest>
         <urn:QualifiedPatientIdentifier>
            <urn1:SubjectIdentifier>MRN-1.1-A</urn1:SubjectIdentifier>
            <urn1:AssigningAuthorityIdentifier>1.1</urn1:AssigningAuthorityIdentifier>
         </urn:QualifiedPatientIdentifier>
         <urn:TargetHomeCommunity>2.123.2</urn:TargetHomeCommunity>
         <urn:TargetHomeCommunity>3.123.3</urn:TargetHomeCommunity>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response"/><con:assertion type="XPath Match"><con:configuration><path>declare namespace s='http://schemas.xmlsoap.org/soap/envelope/';
declare namespace pcf='urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade';

//s:Envelope/s:Body/pcf:RetrievePatientCorrelationsResponse/count(pcf:QualifiedPatientIdentifier)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:wsaConfig mustUnderstand="NONE" version="200508"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="8088" path="/mockPatientCorrelationService" name="MockService 1" host="Tiller-PC" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="RetrievePatientCorrelations" interface="PatientCorrelationBinding" operation="RetrievePatientCorrelations"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <RetrievePatientCorrelationsResponse xmlns="urn:hl7-org:v3" xmlns:jbi="http://java.sun.com/xml/ns/jbi/wsdl-11-wrapper" xmlns:msgns="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation">
         <PRPA_IN201310UV ITSVersion="XML_1.0">
            <id extension="-46923fc8:11fb945256c:-7fd4" root="1.1"/>
            <creationTime value="20090258031223"/>
            <interactionId extension="PRPA_IN201310" root="2.16.840.1.113883.1.6"/>
            <processingCode code="P"/>
            <processingModeCode code="T"/>
            <acceptAckCode code="AL"/>
            <receiver typeCode="RCV">
               <device determinerCode="INSTANCE">
                  <id nullFlavor="NA"/>
               </device>
            </receiver>
            <sender typeCode="SND">
               <device determinerCode="INSTANCE">
                  <id root="1.1"/>
               </device>
            </sender>
            <acknowledgement>
               <typeCode code="CA"/>
               <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </acknowledgement>
            <controlActProcess moodCode="EVN">
               <code code="PRPA_TE201310UV" codeSystem="2.16.840.1.113883.1.6"/>
               <subject typeCode="SUBJ">
                  <registrationEvent>
                     <id nullFlavor="NA"/>
                     <statusCode code="active"/>
                     <subject1>
                        <patient classCode="PAT">
                           <statusCode code="active"/>
                           <patientPerson classCode="PSN" determinerCode="INSTANCE">
                              <name nullFlavor="NA"/>
                           </patientPerson>
                        </patient>
                        <queryByParameter>
                           <queryId extension="-46923fc8:11fb945256c:-7fe4" root="1.1"/>
                           <statusCode code="new"/>
                           <responsePriorityCode code="I"/>
                           <parameterList>
                              <patientIdentifier>
                                 <value extension="MRN-1" root="1.1"/>
                                 <semanticsText/>
                              </patientIdentifier>
                           </parameterList>
                        </queryByParameter>
                     </subject1>
                     <custodian>
                        <assignedEntity>
                           <id nullFlavor="NA"/>
                        </assignedEntity>
                     </custodian>
                  </registrationEvent>
               </subject>
               <queryAck>
                  <queryId extension="-46923fc8:11fb945256c:-7fe4" root="1.1"/>
                  <queryResponseCode code="OK"/>
               </queryAck>
            </controlActProcess>
         </PRPA_IN201310UV>
      </RetrievePatientCorrelationsResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation/PatientCorrelationPortType/RetrievePatientCorrelationsResponse"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:requirements/><con:properties/><con:wssContainer/></con:soapui-project>